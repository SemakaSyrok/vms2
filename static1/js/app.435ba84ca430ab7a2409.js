webpackJsonp([1],{"7Otq":function(t,e,a){t.exports=a.p+"static/img/logo.e204c4a.png"},CFBV:function(t,e){},GiyR:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("7+uW"),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark",class:t.is_noone(),attrs:{id:"navbar"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav ml-auto"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:t.activeLink("/"),attrs:{to:"/"}},[t._v("Главная")])],1),t._v(" "),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:t.activeLink("/cameras"),attrs:{to:"cameras"}},[t._v("Камеры")])],1),t._v(" "),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:t.activeLink("/users"),attrs:{to:"users"}},[t._v("Пользователи")])],1),t._v(" "),a("li",{staticClass:"nav-item"},[a("button",{staticClass:"btn btn-primary nav-link ml-lg-4 p-2",on:{click:function(e){return t.logout()}}},[t._v("Выйти")])])])])]),t._v(" "),this.$store.getters.REQUEST?a("div",{staticClass:"loading-bar"},[a("div",{staticClass:"loading-elem"})]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e("img",{attrs:{src:a("7Otq"),width:"38",height:"34",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]};var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("footer",{staticClass:"bg-dark mt-2",class:this.is_noone()},[e("h3",{staticClass:"text-center text-light  p-3",staticStyle:{"margin-bottom":"0px"}},[this._v("ДомЛес")])])])},staticRenderFns:[]};var i={name:"App",components:{Header:a("VU/8")({name:"Header",computed:{},methods:{activeLink:function(t){return t===this.$route.path?"active":""},is_noone:function(){return"/login"===this.$route.path?"none":""},logout:function(){this.$store.dispatch("logout")}}},n,!1,function(t){a("Y/Em")},"data-v-e8adf244",null).exports,Footer:a("VU/8")({name:"Footer",methods:{is_noone:function(){return"/login"===this.$route.path?"none":""}}},s,!1,function(t){a("GiyR")},"data-v-06770976",null).exports},created:{},beforeCreate:{start:function(){this.$store.getters.SELF.logged||router.push("/login")}},methods:{}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{attrs:{id:"wrapper"}},[e("Header"),this._v(" "),e("router-view")],1),this._v(" "),e("Footer")],1)},staticRenderFns:[]};var u=a("VU/8")(i,o,!1,function(t){a("m3Eo")},null,null).exports,c=a("/ocq"),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wprapper"}},[a("div",{staticClass:"full-page d-flex justify-content-center align-items-center flex-column"},[a("form",{staticClass:"col-sm-9 col-md-8 col-lg-7 col-xl-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"h3",attrs:{for:"exampleInputEmail1 "}},[t._v("Логин")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control",attrs:{type:"text",id:"exampleInputEmail1",placeholder:"example@mail.ru"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"h3",attrs:{for:"exampleInputPassword1 "}},[t._v("Пароль")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1",placeholder:"123456"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),a("button",{staticClass:"btn btn-primary ",attrs:{type:"submit"},on:{click:function(e){return t.submit()}}},[a("p",{staticClass:"h5"},[this.$store.getters.REQUEST?a("span",[t._v("Отправка")]):a("span",[t._v("Вход")])])])])])},staticRenderFns:[]};var d=a("VU/8")({name:"Login",data:function(){return{login:"",password:""}},methods:{submit:function(){this.$store.dispatch("login",{login:this.login,password:this.password})}}},l,!1,function(t){a("gUQF")},"data-v-52cd0baf",null).exports,m=a("Xxa5"),p=a.n(m),v=a("exGp"),f=a.n(v),_=a("7t+N"),h=a.n(_),g=(a("Bb4J"),a("Zrlr")),C=a.n(g),w=a("wxAW"),b=a.n(w),U=function(){function t(){C()(this,t)}return b()(t,null,[{key:"validateNewUser",value:function(t){var e=null;return t.login.length<=6&&(e="Логин слишком маленький"),t.login.length>=32&&(e="Логин слишком большой"),t.password.length<=6&&(e="Пароль слишком маленький"),t.password.length>=32&&(e="Пароль слишком большой"),/^[a-zA-Z][a-zA-Z0-9]+$/gi.test(t.login)||(e="Недопустимые символы в логине"),/^[a-zA-Z0-9]+$/gi.test(t.password)||(e="Недопустимые символы в пароле"),e}},{key:"validateUser",value:function(t){var e=null;return t.login.length<=6&&(e="Логин слишком маленький"),t.login.length>=32&&(e="Логин слишком большой"),t.password.length<=6&&(e="Пароль слишком маленький"),t.password.length>=32&&(e="Пароль слишком большой"),/^[a-zA-Z][a-zA-Z0-9]+$/gi.test(t.login)||(e="Недопустимые символы в логине"),/^[a-zA-Z0-9]+$/gi.test(t.password)||(e="Недопустимые символы в пароле"),e}},{key:"validateCamera",value:function(t){var e=null;return t.connection_string.length<=4&&(e="Строка подключения слишком мала"),t.name.length<=4&&(e="Имя слишком маленькое"),e}}]),t}(),x={name:"Cameras",data:function(){return{newCamera:{connection_string:"",name:"",owner_id:null,error:""},updatedCamera:{id:null,connection_string:"",name:"",owner_id:null,error:""}}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("/login"),this.$store.dispatch("usersRequest"),this.$store.dispatch("camerasRequest")},computed:{cameras:function(){return this.$store.getters.CAMERAS}},methods:{camera:function(t){return this.$store.getters.CAMERAS.find(function(e){return e.id===t})},openCamera:function(){h()("#cameraModal").modal("toggle"),this.newCamera.error=""},openUpdateCamera:function(t){h()("#updateCamera").modal("toggle");var e=this.camera(t);this.updatedCamera.connection_string=e.connection_string,this.updatedCamera.name=e.name,this.updatedCamera.id=e.id,this.updatedCamera.owner_id=e.owner_id,this.updatedCamera.error=""},saveCamera:function(){var t=this;return f()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.newCamera.error="",!t.newCamera.error){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.$store.dispatch("createCamera",{name:t.newCamera.name,connection_string:t.newCamera.connection_string,owner_id:t.newCamera.owner_id});case 7:return e.sent,e.next=10,t.$store.dispatch("camerasRequest");case 10:case"end":return e.stop()}},e,t)}))()},updateCamera:function(t){var e=this;return f()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.updatedCamera.error=U.validateCamera(e.updatedCamera),!e.updatedCamera.error){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.$store.dispatch("updateCamera",{id:e.updatedCamera.id,connection_string:e.updatedCamera.connection_string,name:e.updatedCamera.name,owner_id:e.updatedCamera.owner_id});case 7:return t.sent,t.next=10,e.$store.dispatch("camerasRequest");case 10:case"end":return t.stop()}},t,e)}))()},deleteCamera:function(t){var e=this;return f()(p.a.mark(function a(){return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$store.dispatch("deleteCamera",t);case 2:return a.sent,a.next=5,e.$store.dispatch("camerasRequest");case 5:case"end":return a.stop()}},a,e)}))()},owner_name:function(t){return this.$store.getters.USERS.find(function(e){return e.id===t})}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper p-1"},[a("h1",[t._v("Камеры")]),t._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openCamera()}}},[t._v("Добавить камеру")]),t._v(" "),a("hr",{staticClass:"mb-1"}),t._v(" "),a("div",{staticClass:"users d-flex justify-content-start flex-wrap"},t._l(t.cameras,function(e,r){return a("div",{key:r,staticClass:"user card shadow-sm m-2 p-2 col-sm-12 col-md-5 col-lg-4 col-xl-3"},[a("h3",[t._v(t._s(e.name))]),t._v(" "),a("hr"),t._v(" "),a("h4",[t._v("Url: "),a("span",{staticClass:"bg-light"},[t._v(t._s(e.connection_string))])]),t._v(" "),a("h4",[t._v("ID Пользователя: "+t._s(e.owner_id))]),t._v(" "),a("div",{staticClass:"col-10 my-1"},[a("button",{staticClass:"btn btn-warning",on:{click:function(a){return t.openUpdateCamera(e.id)}}},[t._v("Изменить")]),t._v(" "),a("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.deleteCamera(e.id)}}},[t._v("Удалить")])])])}),0),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"cameraModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"url"}},[t._v("Строка подключения")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newCamera.connection_string,expression:"newCamera.connection_string"}],staticClass:"form-control",attrs:{type:"text",id:"url"},domProps:{value:t.newCamera.connection_string},on:{input:function(e){e.target.composing||t.$set(t.newCamera,"connection_string",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"port"}},[t._v("Имя")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newCamera.name,expression:"newCamera.name"}],staticClass:"form-control",attrs:{type:"text",id:"port"},domProps:{value:t.newCamera.name},on:{input:function(e){e.target.composing||t.$set(t.newCamera,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"select"}},[t._v("Пользователь")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.newCamera.owner_id,expression:"newCamera.owner_id"}],staticClass:"form-control",attrs:{id:"select"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.newCamera,"owner_id",e.target.multiple?a:a[0])}}},t._l(this.$store.getters.SIMPLE_USERS,function(e,r){return a("option",{domProps:{value:e.id}},[t._v("\n                                    "+t._s(e.login)+"\n                                ")])}),0)]),t._v(" "),t.newCamera.error?a("div",{staticClass:"alert alert-danger my-2"},[t._v("\n                            "+t._s(t.newCamera.error)+"\n                        ")]):t._e()])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.saveCamera()}}},[t._v("Save changes")])])])])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"updateCamera",tabindex:"-1",role:"dialog","aria-labelledby":"updateLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"url_"}},[t._v("Строка подключения")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCamera.connection_string,expression:"updatedCamera.connection_string"}],staticClass:"form-control",attrs:{type:"text",id:"url_"},domProps:{value:t.updatedCamera.connection_string},on:{input:function(e){e.target.composing||t.$set(t.updatedCamera,"connection_string",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"port_"}},[t._v("Имя")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCamera.name,expression:"updatedCamera.name"}],staticClass:"form-control",attrs:{type:"text",id:"port_"},domProps:{value:t.updatedCamera.name},on:{input:function(e){e.target.composing||t.$set(t.updatedCamera,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"select_"}},[t._v("Пользователь")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.updatedCamera.owner_id,expression:"updatedCamera.owner_id"}],staticClass:"form-control",attrs:{id:"select_"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.updatedCamera,"owner_id",e.target.multiple?a:a[0])}}},t._l(this.$store.getters.SIMPLE_USERS,function(e,r){return a("option",{domProps:{value:e.id}},[t._v("\n                                    "+t._s(e.login)+"\n                                ")])}),0)]),t._v(" "),t.updatedCamera.error?a("div",{staticClass:"alert alert-danger my-2"},[t._v("\n                            "+t._s(t.updatedCamera.error)+"\n                        ")]):t._e()])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.updateCamera()}}},[t._v("Save changes")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[this._v("Modal title")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"updateLabel"}},[this._v("Обновить камеру")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var k=a("VU/8")(x,y,!1,function(t){a("kI22")},"data-v-16967149",null).exports,$={name:"Users",data:function(){return{newUser:{login:"",password:"",name:"",is_admin:!1},updatedUser:{id:null,login:"",password:"a",name:"",is_admin:!1,error:""}}},computed:{users:function(){return this.$store.getters.USERS}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("/login"),this.$store.dispatch("usersRequest")},methods:{openModal:function(){h()("#exampleModal").modal("toggle"),this.newUser.error=""},openUpdate:function(t){h()("#updateModal").modal("toggle"),this.updatedUser.error=null;var e,a=this.users.find(function(e){return e.id===t});e=!!a.is_admin,this.updatedUser.id=a.id,this.updatedUser.login=a.login,this.updatedUser.password=a.pass,this.updatedUser.name=a.name,this.updatedUser.is_admin=e},saveUser:function(){var t=f()(p.a.mark(function t(){var e;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.newUser.error=null,!(e=U.validateNewUser(this.newUser))){t.next=7;break}return this.newUser.error=e,t.abrupt("return");case 7:return t.next=9,this.$store.dispatch("createUser",{login:this.newUser.login,password:this.newUser.password,is_admin:this.newUser.is_admin,name:this.newUser.name});case 9:return t.sent,console.log("asdasd"),console.log(),t.next=14,this.$store.dispatch("usersRequest");case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),usersRequest:function(){this.$store.dispatch("usersRequest")},deleteUser:function(t){var e=this;return f()(p.a.mark(function a(){return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$store.dispatch("deleteUser",t);case 2:return a.sent,a.next=5,e.$store.dispatch("usersRequest");case 5:case"end":return a.stop()}},a,e)}))()},updateUser:function(t){var e=this;return f()(p.a.mark(function a(){var r;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=U.validateUser(e.updatedUser),console.log(r),!r){a.next=7;break}return e.updatedUser.error=r,a.abrupt("return");case 7:return a.next=9,e.$store.dispatch("updateUser",{id:t,login:e.updatedUser.login,password:e.updatedUser.password,is_admin:e.updatedUser.is_admin,name:e.updatedUser.name});case 9:return a.sent,a.next=12,e.$store.dispatch("usersRequest");case 12:case"end":return a.stop()}},a,e)}))()}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-1",attrs:{id:"wrapper"}},[a("h1",[t._v("Пользователи")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{id:"btn","data-toggle":"modal"},on:{click:function(e){return t.openModal()}}},[t._v("\n        Добавить пользователя\n    ")]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"users d-flex justify-content-start flex-wrap"},t._l(t.users,function(e,r){return a("div",{key:r,staticClass:"user card shadow-sm m-2 p-2 col-sm-12 col-md-5 col-lg-4 col-xl-3"},[a("h3",[t._v(t._s(e.name))]),t._v(" "),a("hr"),t._v(" "),a("h4",[t._v("Логин: "+t._s(e.login))]),t._v(" "),a("h4",[t._v("Пароль: "+t._s(e.pass))]),t._v(" "),a("h4",[t._v("ID: "+t._s(e.id))]),t._v(" "),a("h4",[t._v(t._s(e.is_admin?"Админ":"Не админ"))]),t._v(" "),a("div",{staticClass:"col-10 my-1"},[a("button",{staticClass:"btn btn-warning",on:{click:function(a){return t.openUpdate(e.id)}}},[t._v("Изменить")]),t._v(" "),a("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.deleteUser(e.id)}}},[t._v("Удалить")])])])}),0),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"log"}},[t._v("Логин")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.login,expression:"newUser.login"}],staticClass:"form-control",attrs:{type:"text",id:"log"},domProps:{value:t.newUser.login},on:{input:function(e){e.target.composing||t.$set(t.newUser,"login",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("Имя")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.name,expression:"newUser.name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.newUser.name},on:{input:function(e){e.target.composing||t.$set(t.newUser,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"pass"}},[t._v("Пароль")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.password,expression:"newUser.password"}],staticClass:"form-control",attrs:{type:"text",id:"pass"},domProps:{value:t.newUser.password},on:{input:function(e){e.target.composing||t.$set(t.newUser,"password",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.is_admin,expression:"newUser.is_admin"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheck1"},domProps:{checked:Array.isArray(t.newUser.is_admin)?t._i(t.newUser.is_admin,null)>-1:t.newUser.is_admin},on:{change:function(e){var a=t.newUser.is_admin,r=e.target,n=!!r.checked;if(Array.isArray(a)){var s=t._i(a,null);r.checked?s<0&&t.$set(t.newUser,"is_admin",a.concat([null])):s>-1&&t.$set(t.newUser,"is_admin",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.newUser,"is_admin",n)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"customCheck1"}},[t._v("\n                                Это администратор?\n                            ")])]),t._v(" "),t.newUser.error?a("div",{staticClass:"alert alert-danger my-2"},[t._v("\n                            "+t._s(t.newUser.error)+"\n                        ")]):t._e()])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.saveUser()}}},[t._v("Создать")])])])])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"updateModal",tabindex:"-1",role:"dialog","aria-labelledby":"updateModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"log"}},[t._v("Логин")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedUser.login,expression:"updatedUser.login"}],staticClass:"form-control",attrs:{type:"text",id:"log1"},domProps:{value:t.updatedUser.login},on:{input:function(e){e.target.composing||t.$set(t.updatedUser,"login",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("Имя")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedUser.name,expression:"updatedUser.name"}],staticClass:"form-control",attrs:{type:"text",id:"name1"},domProps:{value:t.updatedUser.name},on:{input:function(e){e.target.composing||t.$set(t.updatedUser,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"pass1"}},[t._v("Пароль")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedUser.password,expression:"updatedUser.password"}],staticClass:"form-control",attrs:{type:"text",id:"pass1"},domProps:{value:t.updatedUser.password},on:{input:function(e){e.target.composing||t.$set(t.updatedUser,"password",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedUser.is_admin,expression:"updatedUser.is_admin"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheck12"},domProps:{checked:Array.isArray(t.updatedUser.is_admin)?t._i(t.updatedUser.is_admin,null)>-1:t.updatedUser.is_admin},on:{change:function(e){var a=t.updatedUser.is_admin,r=e.target,n=!!r.checked;if(Array.isArray(a)){var s=t._i(a,null);r.checked?s<0&&t.$set(t.updatedUser,"is_admin",a.concat([null])):s>-1&&t.$set(t.updatedUser,"is_admin",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.updatedUser,"is_admin",n)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"customCheck12"}},[t._v("\n                                Это администратор?\n                            ")])]),t._v(" "),t.updatedUser.error?a("div",{staticClass:"alert alert-danger my-2"},[t._v("\n                            "+t._s(t.updatedUser.error)+"\n                        ")]):t._e()])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.updateUser(t.updatedUser.id)}}},[t._v("Обновить")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[this._v("Создать пользователя")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"updateModalLabel"}},[this._v("Обновить пользователя")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var S=a("VU/8")($,E,!1,function(t){a("hPox")},"data-v-819a72fc",null).exports,q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper container-fluid"},[a("h3",[t._v(" "+t._s(t.camera().name))]),t._v(" "),a("img",{staticClass:"d-block mx-auto img-fluid",attrs:{src:t.camera().connection_string,id:"camera",alt:""}}),t._v(" "),a("div",{staticClass:"row d-flex justify-content-center"},[a("button",{staticClass:"btn btn-primary m-1",on:{click:function(e){return t.before()}}},[t._v(" ← ")]),t._v(" "),a("button",{staticClass:"btn btn-primary m-1",on:{click:function(e){return t.next()}}},[t._v(" → ")])])])},staticRenderFns:[]};var A=a("VU/8")({name:"Home",data:function(){return{current_camera:0,width:300,height:300}},computed:{},beforeCreate:function(){!1!==this.$store.getters.SELF.logged?(this.$store.dispatch("usersRequest"),this.$store.dispatch("camerasRequest")):this.$router.push("/login")},methods:{cameras_amount:function(){return this.$store.getters.CAMERAS.length},camera:function(){var t=this.$store.getters.CAMERAS[this.current_camera];return t},next:function(){this.current_camera+1>=this.cameras_amount()?this.current_camera=0:this.current_camera++},before:function(){this.current_camera-1<0?this.current_camera=this.cameras_amount()-1:this.current_camera--}}},q,!1,function(t){a("sVrn")},"data-v-04e0399a",null).exports,R={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"wrapper"}},[e("h1",[this._v("Chats")])])}]};var P,M,L,N,T,F=a("VU/8")({name:"Chats"},R,!1,function(t){a("CFBV")},"data-v-5e1f0c89",null).exports,j=a("NYxO"),z=a("mvHQ"),I=a.n(z),V=this,O={state:{cameras:[]},getters:{CAMERAS:function(t){return t.cameras}},mutations:{renewCameras:function(t,e){return t.cameras=e}},actions:{camerasRequest:(N=f()(p.a.mark(function t(e){e.state;var a=e.rootState,r=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r("request_status",!0),fetch(a.api.url+"/cameras",{credentials:"include",method:"GET",headers:{Authorization:a.api.token}}).then(function(t){return 200===t.status?t.json():null}).then(function(t){return r("renewCameras",t)}).catch(function(t){return alert("Ошибка получения данных камер")}).finally(function(){return r("request_status",!1)});case 2:case"end":return t.stop()}},t,V)})),function(t){return N.apply(this,arguments)}),createCamera:(L=f()(p.a.mark(function t(e,a){e.state;var r=e.rootState,n=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n("request_status",!0),t.abrupt("return",fetch(r.api.url+"/camera",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:I()({connection_string:a.connection_string,name:a.name,owner_id:a.owner_id})}).then(function(t){return 200!==t.status?alert("Ошибка добавления"):alert("Камера добавлена")}).catch(function(t){return alert("Ошибка добавления")}).finally(function(){return n("request_status",!1)}));case 2:case"end":return t.stop()}},t,V)})),function(t,e){return L.apply(this,arguments)}),deleteCamera:(M=f()(p.a.mark(function t(e,a){e.state;var r=e.rootState,n=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n("request_status",!0),t.abrupt("return",fetch(r.api.url+"/camera",{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:I()({id:a})}).then(function(t){return 200!==t.status?alert("Ошибка удаления"):alert("Камера удалена")}).catch(function(t){return alert("Ошибка удаления")}).finally(function(){return n("request_status",!1)}));case 2:case"end":return t.stop()}},t,V)})),function(t,e){return M.apply(this,arguments)}),updateCamera:(P=f()(p.a.mark(function t(e,a){e.state;var r=e.rootState,n=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n("request_status",!0),t.abrupt("return",fetch(r.api.url+"/camera",{credentials:"include",method:"PUT",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:I()({id:a.id,connection_string:a.connection_string,name:a.name,owner_id:a.owner_id})}).then(function(t){return 200!==t.status?alert("Ошибка обновления"):alert("Камера обновлена")}).catch(function(t){return alert("Ошибка обновления")}).finally(function(){return n("request_status",!1)}));case 2:case"end":return t.stop()}},t,V)})),function(t,e){return P.apply(this,arguments)})}},H=this,Z={state:{users:[]},getters:{USERS:function(t){return t.users.filter(function(t){return"admin"!==t.login})},SIMPLE_USERS:function(t){return t.users.filter(function(t){return 1!==t.is_admin})}},mutations:{renewUsers:function(t,e){t.users=e}},actions:{usersRequest:function(){var t=f()(p.a.mark(function t(e){e.state;var a=e.rootState,r=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r("request_status",!0),fetch(a.api.url+"/users",{credentials:"include",method:"GET",headers:{Authorization:a.api.token}}).then(function(t){return 200===t.status?t.json():null}).then(function(t){return r("renewUsers",t)}).catch(function(t){return alert("Ошибка получения данных пользователей")}).finally(function(){return r("request_status",!1)});case 2:case"end":return t.stop()}},t,H)}));return function(e){return t.apply(this,arguments)}}(),createUser:function(){var t=f()(p.a.mark(function t(e,a){e.state;var r=e.rootState,n=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n("request_status",!0),t.abrupt("return",fetch(r.api.url+"/user",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:I()({login:a.login,password:a.password,is_admin:a.is_admin,name:a.name})}).then(function(t){return 200!==t.status?alert("Ошибка добавления"):alert("Пользователь добавлен")}).catch(function(t){return alert("Ошибка добавления")}).finally(function(){return n("request_status",!1)}));case 2:case"end":return t.stop()}},t,H)}));return function(e,a){return t.apply(this,arguments)}}(),deleteUser:function(){var t=f()(p.a.mark(function t(e,a){e.state;var r=e.rootState,n=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n("request_status",!0),t.abrupt("return",fetch(r.api.url+"/user",{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:I()({id:a})}).then(function(t){return 200!==t.status?alert("Ошибка удаления"):alert("Пользователь удален")}).catch(function(t){return alert("Ошибка добавления")}).finally(function(){return n("request_status",!1)}));case 2:case"end":return t.stop()}},t,H)}));return function(e,a){return t.apply(this,arguments)}}(),updateUser:function(){var t=f()(p.a.mark(function t(e,a){e.state;var r=e.rootState,n=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n("request_status",!0),t.abrupt("return",fetch(r.api.url+"/user",{credentials:"include",method:"PUT",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:I()({id:a.id,login:a.login,password:a.password,is_admin:a.is_admin,name:a.name})}).then(function(t){return 200!==t.status?alert("Ошибка изменения"):alert("Пользователь изменен")}).catch(function(t){return alert("Ошибка изменения")}).finally(function(){return n("request_status",!1)}));case 2:case"end":return t.stop()}},t,H)}));return function(e,a){return t.apply(this,arguments)}}()}},Q=this,G={state:{id:null,login:"",logged:!1},getters:{SELF:function(t){return t}},mutations:{login:function(t,e){console.log(e),t.login=e.login,t.id=e.id,t.logged=!0,Y.push("/")},logout:function(t){t.id=null,t.login=null,t.logged=!1,Y.push("login")}},actions:{login:function(){var t=f()(p.a.mark(function t(e,a){e.state;var r=e.rootState,n=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n("request_status",!0),fetch(r.api.url+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:I()({login:a.login,password:a.password})}).then(function(t){return 200===t.status?t.json():null}).then(function(t){null!==t&&(n("login",t),n("token",t.token))}).catch(function(t){return alert("Ошибка авторизации")}).finally(function(){return n("request_status",!1)});case 2:case"end":return t.stop()}},t,Q)}));return function(e,a){return t.apply(this,arguments)}}(),logout:function(t){var e=t.commit;e("logout"),e("token_destroy")}}},D=(T=f()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{code:404});case 1:case"end":return t.stop()}},t,Q)})),{state:{url:"https://domles-camera.herokuapp.com",is_request:!1,token:null},getters:{API:function(t){return t},REQUEST:function(t){return t.is_request},TOKEN:function(t){return t.token}},mutations:{request_status:function(t,e){t.is_request=e},token:function(t,e){t.token=e},token_destroy:function(t){t.token=null}},actions:{}});r.a.use(j.a);var B=new j.a.Store({state:{},getters:{},mutations:{},actions:{},modules:{cameras:O,users:Z,self:G,api:D}});r.a.use(c.a);var Y=new c.a({routes:[{path:"/",name:"home",component:A},{path:"/login",name:"login",component:d},{path:"/cameras",name:"cameras",component:k},{path:"/users",name:"users",component:S},{path:"/chats",name:"chats",component:F}]});a("qb6w");r.a.config.productionTip=!1,new r.a({el:"#app",router:Y,store:B,components:{App:u},template:"<App/>"})},"Y/Em":function(t,e){},gUQF:function(t,e){},hPox:function(t,e){},kI22:function(t,e){},m3Eo:function(t,e){},qb6w:function(t,e){},sVrn:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.435ba84ca430ab7a2409.js.map
webpackJsonp([1],{"6yFU":function(t,e){},"7Otq":function(t,e,n){t.exports=n.p+"static/img/logo.e204c4a.png"},CFBV:function(t,e){},CMVj:function(t,e){},GiyR:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark",class:t.is_noone(),attrs:{id:"navbar"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[n("ul",{staticClass:"navbar-nav ml-auto"},[n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",class:t.activeLink("/"),attrs:{to:"/"}},[t._v("Главная")])],1),t._v(" "),n("li",{staticClass:"nav-item"},[n("button",{staticClass:"btn btn-primary nav-link ml-lg-4 p-2",on:{click:function(e){return t.logout()}}},[t._v("Выйти")])])])])]),t._v(" "),this.$store.getters.REQUEST?n("div",{staticClass:"loading-bar"},[n("div",{staticClass:"loading-elem"})]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e("img",{attrs:{src:n("7Otq"),width:"38",height:"34",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]};var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("footer",{staticClass:"bg-dark mt-2",class:this.is_noone()},[e("h3",{staticClass:"text-center text-light  p-3",staticStyle:{"margin-bottom":"0px"}},[this._v("ДомЛес")])])])},staticRenderFns:[]};var o={name:"App",components:{Header:n("VU/8")({name:"Header",computed:{},methods:{activeLink:function(t){return t===this.$route.path?"active":""},is_noone:function(){return"/login"===this.$route.path?"none":""},logout:function(){this.$store.dispatch("logout")}}},r,!1,function(t){n("CMVj")},"data-v-5d42c44a",null).exports,Footer:n("VU/8")({name:"Footer",methods:{is_noone:function(){return"/login"===this.$route.path?"none":""}}},s,!1,function(t){n("GiyR")},"data-v-06770976",null).exports},created:{},beforeCreate:{start:function(){this.$store.getters.SELF.logged||router.push("/login")}},methods:{}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{attrs:{id:"wrapper"}},[e("Header"),this._v(" "),e("router-view")],1),this._v(" "),e("Footer")],1)},staticRenderFns:[]};var c=n("VU/8")(o,i,!1,function(t){n("t2n2")},null,null).exports,u=n("/ocq"),l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"wprapper"}},[n("div",{staticClass:"full-page d-flex justify-content-center align-items-center flex-column"},[n("form",{staticClass:"col-sm-9 col-md-8 col-lg-7 col-xl-6"},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"h3",attrs:{for:"exampleInputEmail1 "}},[t._v("Логин")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control",attrs:{type:"text",id:"exampleInputEmail1",placeholder:"example@mail.ru"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"h3",attrs:{for:"exampleInputPassword1 "}},[t._v("Пароль")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1",placeholder:"123456"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),n("br"),t._v(" "),n("button",{staticClass:"btn btn-primary ",attrs:{type:"submit"},on:{click:function(e){return t.submit()}}},[n("p",{staticClass:"h5"},[this.$store.getters.REQUEST?n("span",[t._v("Отправка")]):n("span",[t._v("Вход")])])])])])},staticRenderFns:[]};var m=n("VU/8")({name:"Login",data:function(){return{login:"",password:""}},methods:{submit:function(){this.$store.dispatch("login",{login:this.login,password:this.password})}}},l,!1,function(t){n("6yFU")},"data-v-46f404be",null).exports,p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper container-fluid"},[n("button",{staticClass:"btn btn-primary mt-2 mb-1",on:{click:function(e){return t.getCameras()}}},[t._v("Получить данные с камер")]),t._v(" "),t.camera()?n("span",[n("h3",[t._v(" "+t._s(t.camera().name))]),t._v(" "),n("img",{staticClass:"d-block mx-auto img-fluid",attrs:{src:t.camera().connection_string,id:"camera",alt:""}}),t._v(" "),n("div",{staticClass:"row d-flex justify-content-center"},[n("button",{staticClass:"btn btn-primary m-1",on:{click:function(e){return t.before()}}},[t._v(" ← ")]),t._v(" "),n("button",{staticClass:"btn btn-primary m-1",on:{click:function(e){return t.next()}}},[t._v(" → ")])])]):t._e()])},staticRenderFns:[]};var d=n("VU/8")({name:"Home",data:function(){return{current_camera:0,width:300,height:300}},computed:{},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("login")},methods:{cameras_amount:function(){return this.$store.getters.CAMERAS.length},camera:function(){var t=this.$store.getters.CAMERAS[this.current_camera];return t},next:function(){this.current_camera+1>=this.cameras_amount()?this.current_camera=0:this.current_camera++},before:function(){this.current_camera-1<0?this.current_camera=this.cameras_amount()-1:this.current_camera--},getCameras:function(){this.$store.dispatch("camerasRequest")}}},p,!1,function(t){n("yC9K")},"data-v-7d3eec78",null).exports,f={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"wrapper"}},[e("h1",[this._v("Chats")])])}]};var h,v=n("VU/8")({name:"Chats"},f,!1,function(t){n("CFBV")},"data-v-5e1f0c89",null).exports,g=n("NYxO"),_=n("Xxa5"),b=n.n(_),C=n("exGp"),w=n.n(C),x=this,k={state:{cameras:[]},getters:{CAMERAS:function(t){return t.cameras}},mutations:{renewCameras:function(t,e){return t.cameras=e}},actions:{camerasRequest:(h=w()(b.a.mark(function t(e){e.state;var n=e.rootState,a=e.commit;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a("request_status",!0),fetch(n.api.url+"/api/cameras",{credentials:"include",method:"GET",headers:{Authorization:n.api.token}}).then(function(t){return 200===t.status?t.json():null}).then(function(t){return a("renewCameras",t)}).catch(function(t){return alert("Ошибка получения данных камер")}).finally(function(){return a("request_status",!1)});case 2:case"end":return t.stop()}},t,x)})),function(t){return h.apply(this,arguments)})}},y=n("mvHQ"),E=n.n(y),$=this,S={state:{id:null,login:"",logged:!1},getters:{SELF:function(t){return t}},mutations:{login:function(t,e){t.login=e.login,t.id=e.id,t.logged=!0,q.push("/")},logout:function(t){t.id=null,t.login=null,t.logged=!1,q.push("login")}},actions:{login:function(){var t=w()(b.a.mark(function t(e,n){e.state;var a=e.rootState,r=e.commit;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r("request_status",!0),fetch(a.api.url+"/login",{method:"POST",headers:{"Content-Type":"Application/json"},body:E()({login:n.login,password:n.password})}).then(function(t){return 200===t.status?t.json():alert("Ошибка авторизации")}).then(function(t){null!==t&&(r("login",t),r("token",t.token))}).catch(function(t){return console.log(t)}).finally(function(){return r("request_status",!1)});case 2:case"end":return t.stop()}},t,$)}));return function(e,n){return t.apply(this,arguments)}}(),logout:function(t){var e=t.commit;e("logout"),e("token_destroy")}}},F={state:{url:"https://domles-camera.herokuapp.com",is_request:!1,token:null},getters:{API:function(t){return t},REQUEST:function(t){return t.is_request},TOKEN:function(t){return t.token}},mutations:{request_status:function(t,e){t.is_request=e},token:function(t,e){t.token=e},token_destroy:function(t){t.token=null}},actions:{}};a.a.use(g.a);var R=new g.a.Store({state:{},getters:{},mutations:{},actions:{},modules:{cameras:k,self:S,api:F}});a.a.use(u.a);var q=new u.a({routes:[{path:"/login",name:"login",component:m},{path:"/chats",name:"chats",component:v},{path:"/",name:"home",component:d}]});n("qb6w"),n("Bb4J");a.a.config.productionTip=!1,new a.a({el:"#app",router:q,store:R,components:{App:c},template:"<App/>"})},qb6w:function(t,e){},t2n2:function(t,e){},yC9K:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.df89322bfb7451a0cc92.js.map
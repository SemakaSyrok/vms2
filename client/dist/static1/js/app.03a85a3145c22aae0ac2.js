webpackJsonp([1],{0:function(t,e){},"5q4t":function(t,e){},"61G4":function(t,e){},"7Otq":function(t,e,s){t.exports=s.p+"static1/img/logo.e204c4a.png"},BnTX:function(t,e){},GMqv:function(t,e){},GiyR:function(t,e){},HeMT:function(t,e){},I9jn:function(t,e){},IfgE:function(t,e){},"K+1A":function(t,e){},KuaY:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAARVBMVEVHcEzzRjT0QzbxQDn0Qzb3QDj0QzbzRDj0QzbxRTf0Qzb0QzbzQzfyQTTyRjP0Qzb1Qjb0QzbzQzb0RDb0QjbzQzb0QzZP0GjVAAAAFnRSTlMALOYk5CDfKecl6eMqJyjo5+vr6urk/zGCyQAAALpJREFUSMft1dsSgiAUhWEKK3fRuXj/Ry3CIdTFZnHnhVzi/42O7kFj1rW05QTvW4f3L9v+gPalO25w7z0S0nmPROiRCD0Uu71HIvbw1lAoPRRqD0Sln4lqPxFEPxJUnwmyT+J5Jfsk6D4XXP8V79g/yN7ILYI7CYb3Qz/Sv+fE0L96UqTvZU+UyL4vJUbzQIjJ/FTFbN6sPoBgPtWRhRcVUbhUFufWg+wnWo7KINoO4/JxL279FS5ufQBHZxvwqhwJQwAAAABJRU5ErkJggg=="},MIEL:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("7+uW"),a={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",[r("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark fixed-top ",class:t.is_noone(),attrs:{id:"navbar"}},[r("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[r("img",{class:{request:t.request},attrs:{src:s("7Otq"),width:"38",height:"34",alt:""}})]),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[r("ul",{staticClass:"navbar-nav ml-auto"},[r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:t.activeLink("/"),attrs:{to:"/"}},[t._v("Главная")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:t.activeLink("/news"),attrs:{to:"/news"}},[t._v("Новинки")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:t.activeLink("/bonuses"),attrs:{to:"/bonuses"}},[t._v("Бонусы")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:t.activeLink("/cameras"),attrs:{to:"/cameras"}},[t._v("Камеры")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:t.activeLink("/users"),attrs:{to:"/users"}},[t._v("Пользователи")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:t.activeLink("/chat"),attrs:{to:"/chats"}},[t._v("Чаты")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:t.activeLink("/works"),attrs:{to:"/works"}},[t._v("Работы")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:t.activeLink("/coasts"),attrs:{to:"/coasts"}},[t._v("Расценки")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:t.activeLink("/questions"),attrs:{to:"/questions"}},[t._v("Вопрос/Ответ")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:t.activeLink("/benefit"),attrs:{to:"/benefit"}},[t._v("Полезное")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:t.activeLink("/projects"),attrs:{to:"/projects"}},[t._v("Проекты")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("button",{staticClass:"btn btn-primary nav-link ml-lg-4 p-2",on:{click:function(e){return t.logout()}}},[t._v("Выйти")])])])]),t._v(" "),this.$store.getters.REQUEST?r("div",{staticClass:"loading-bar"},[r("div",{staticClass:"loading-elem"})]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]};var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("footer",{staticClass:"bg-dark mt-2",class:this.is_noone()},[e("h3",{staticClass:"text-center text-light  p-3",staticStyle:{"margin-bottom":"0px"}},[this._v("ДомЛес")])])])},staticRenderFns:[]};var o={name:"App",components:{Header:s("VU/8")({name:"Header",computed:{request:function(){return this.$store.getters.REQUEST}},methods:{activeLink:function(t){return t===this.$route.path?"active":""},is_noone:function(){return"/login"===this.$route.path?"none":""},logout:function(){this.$store.dispatch("logout")}}},a,!1,function(t){s("IfgE")},"data-v-30d3d98b",null).exports,Footer:s("VU/8")({name:"Footer",methods:{is_noone:function(){return"/login"===this.$route.path?"none":""}}},n,!1,function(t){s("GiyR")},"data-v-06770976",null).exports},data:function(){return{io:null}},beforeCreate:function(){var t=localStorage.getItem("_token")||null,e=localStorage.getItem("_login")||null,s=localStorage.getItem("_id")||null;t&&e&&s&&this.$store.dispatch("loginUserByStorage",{login:e,id:s,token:t}),this.$store.getters.SELF.logged||router.push("/login")},mounted:function(){},methods:{},updated:function(){}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"pt-5",attrs:{id:"wrapper"}},[e("br"),this._v(" "),e("Header"),this._v(" "),e("router-view")],1),this._v(" "),e("Footer")],1)},staticRenderFns:[]};var c=s("VU/8")(o,i,!1,function(t){s("bj6J")},null,null).exports,u=s("/ocq"),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"wprapper"}},[s("div",{staticClass:"full-page d-flex justify-content-center align-items-center flex-column"},[s("form",{staticClass:"col-sm-9 col-md-8 col-lg-7 col-xl-6"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"h3",attrs:{for:"exampleInputEmail1 "}},[t._v("Логин")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control",attrs:{type:"text",id:"exampleInputEmail1",placeholder:"example@mail.ru"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"h3",attrs:{for:"exampleInputPassword1 "}},[t._v("Пароль")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1",placeholder:"123456"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),s("button",{staticClass:"btn btn-primary ",attrs:{type:"submit"},on:{click:function(e){return t.submit()}}},[s("p",{staticClass:"h5"},[this.$store.getters.REQUEST?s("span",[t._v("Отправка")]):s("span",[t._v("Вход")])])])])])},staticRenderFns:[]};var d=s("VU/8")({name:"Login",data:function(){return{login:"",password:""}},beforeCreate:function(){},methods:{submit:function(){this.$store.dispatch("login",{login:this.login,password:this.password})}}},l,!1,function(t){s("weyE")},"data-v-75bb041c",null).exports,m=s("Xxa5"),p=s.n(m),v=s("exGp"),f=s.n(v),g=s("7t+N"),_=s.n(g),h=(s("Bb4J"),s("Zrlr")),C=s.n(h),w=s("wxAW"),b=s.n(w),k=function(){function t(){C()(this,t)}return b()(t,null,[{key:"validateNewUser",value:function(t){var e=null;return t.login.length<=6&&(e="Логин слишком маленький"),t.login.length>=32&&(e="Логин слишком большой"),t.password.length<=6&&(e="Пароль слишком маленький"),t.password.length>=32&&(e="Пароль слишком большой"),/^[a-zA-Z][a-zA-Z0-9]+$/gi.test(t.login)||(e="Недопустимые символы в логине"),/^[a-zA-Z0-9]+$/gi.test(t.password)||(e="Недопустимые символы в пароле"),console.log("validator : "+e),e}},{key:"validateUser",value:function(t){var e=null;return t.login.length<=6&&(e="Логин слишком маленький"),t.login.length>=32&&(e="Логин слишком большой"),t.password.length<=6&&(e="Пароль слишком маленький"),t.password.length>=32&&(e="Пароль слишком большой"),/^[a-zA-Z][a-zA-Z0-9]+$/gi.test(t.login)||(e="Недопустимые символы в логине"),/^[a-zA-Z0-9]+$/gi.test(t.password)||(e="Недопустимые символы в пароле"),e}},{key:"validateCamera",value:function(t){var e=null;return t.connection_string.length<=4&&(e="Строка подключения слишком мала"),t.name.length<=4&&(e="Имя слишком маленькое"),e}}]),t}(),$={name:"Cameras",data:function(){return{newCamera:{connection_string:"",name:"",owner_id:null,error:""},updatedCamera:{id:null,connection_string:"",name:"",owner_id:null,error:""}}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("/login"),this.$store.dispatch("usersRequest"),this.$store.dispatch("camerasRequest")},computed:{cameras:function(){return this.$store.getters.CAMERAS}},methods:{camera:function(t){return this.$store.getters.CAMERAS.find(function(e){return e.id===t})},openCamera:function(){_()("#cameraModal").modal("toggle"),this.newCamera.error=""},openUpdateCamera:function(t){_()("#updateCamera").modal("toggle");var e=this.camera(t);this.updatedCamera.connection_string=e.connection_string,this.updatedCamera.name=e.name,this.updatedCamera.id=e.id,this.updatedCamera.owner_id=e.owner_id,this.updatedCamera.error=""},saveCamera:function(){var t=this;return f()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validate_camera(),!t.newCamera.error){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.$store.dispatch("createCamera",{name:t.newCamera.name,connection_string:t.newCamera.connection_string,owner_id:t.newCamera.owner_id});case 7:return e.sent,e.next=10,t.$store.dispatch("camerasRequest");case 10:case"end":return e.stop()}},e,t)}))()},validate_camera:function(){var t=null;this.newCamera.connection_string.length<=4&&(t="Строка подключения слишком мала"),this.newCamera.name.length<=4&&(t="Имя слишком маленькое"),this.newCamera.owner_id||(t="Пользователь не выбран"),this.newCamera.error=t},updateCamera:function(t){var e=this;return f()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.updatedCamera.error=k.validateCamera(e.updatedCamera),!e.updatedCamera.error){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.$store.dispatch("updateCamera",{id:e.updatedCamera.id,connection_string:e.updatedCamera.connection_string,name:e.updatedCamera.name,owner_id:e.updatedCamera.owner_id});case 7:return t.sent,t.next=10,e.$store.dispatch("camerasRequest");case 10:case"end":return t.stop()}},t,e)}))()},deleteCamera:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.$store.dispatch("deleteCamera",t);case 2:return s.sent,s.next=5,e.$store.dispatch("camerasRequest");case 5:case"end":return s.stop()}},s,e)}))()},owner_name:function(t){return this.$store.getters.USERS.find(function(e){return e.id===t})}}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper container"},[s("h1",[t._v("Камеры")]),t._v(" "),s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openCamera()}}},[t._v("Добавить камеру")]),t._v(" "),s("hr",{staticClass:"mb-1"}),t._v(" "),s("div",{staticClass:"users d-flex justify-content-start flex-wrap"},t._l(t.cameras,function(e,r){return s("div",{key:r,staticClass:"user   p-2 col-sm-12 col-md-5 col-lg-4 col-xl-3"},[s("div",{staticClass:"card shadow-sm p-1"},[s("h3",[t._v(t._s(e.name))]),t._v(" "),s("hr"),t._v(" "),s("h4",[t._v("Url: "),s("span",{staticClass:"bg-light"},[t._v(t._s(e.connection_string))])]),t._v(" "),s("h4",[t._v("ID Пользователя: "+t._s(e.owner_id))]),t._v(" "),s("div",{staticClass:" my-1"},[s("button",{staticClass:"btn btn-warning",on:{click:function(s){return t.openUpdateCamera(e.id)}}},[t._v("Изменить")]),t._v(" "),s("button",{staticClass:"btn btn-danger",on:{click:function(s){return t.deleteCamera(e.id)}}},[t._v("Удалить")])])])])}),0),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"cameraModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),s("div",{staticClass:"modal-body"},[s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"url"}},[t._v("Строка подключения")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCamera.connection_string,expression:"newCamera.connection_string"}],staticClass:"form-control",attrs:{type:"text",id:"url"},domProps:{value:t.newCamera.connection_string},on:{input:function(e){e.target.composing||t.$set(t.newCamera,"connection_string",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"port"}},[t._v("Имя")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCamera.name,expression:"newCamera.name"}],staticClass:"form-control",attrs:{type:"text",id:"port"},domProps:{value:t.newCamera.name},on:{input:function(e){e.target.composing||t.$set(t.newCamera,"name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"select"}},[t._v("Пользователь")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.newCamera.owner_id,expression:"newCamera.owner_id"}],staticClass:"form-control",attrs:{id:"select"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.newCamera,"owner_id",e.target.multiple?s:s[0])}}},t._l(t.$store.getters.SIMPLE_USERS,function(e,r){return s("option",{domProps:{value:e.id}},[t._v("\n                                    "+t._s(e.login)+"\n                                ")])}),0)]),t._v(" "),t.newCamera.error?s("div",{staticClass:"alert alert-danger my-2"},[t._v("\n                            "+t._s(t.newCamera.error)+"\n                        ")]):t._e()])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.saveCamera()}}},[t._v("Сохранить")])])])])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"updateCamera",tabindex:"-1",role:"dialog","aria-labelledby":"updateLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),s("div",{staticClass:"modal-body"},[s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"url_"}},[t._v("Строка подключения")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCamera.connection_string,expression:"updatedCamera.connection_string"}],staticClass:"form-control",attrs:{type:"text",id:"url_"},domProps:{value:t.updatedCamera.connection_string},on:{input:function(e){e.target.composing||t.$set(t.updatedCamera,"connection_string",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"port_"}},[t._v("Имя")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCamera.name,expression:"updatedCamera.name"}],staticClass:"form-control",attrs:{type:"text",id:"port_"},domProps:{value:t.updatedCamera.name},on:{input:function(e){e.target.composing||t.$set(t.updatedCamera,"name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"select_"}},[t._v("Пользователь")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.updatedCamera.owner_id,expression:"updatedCamera.owner_id"}],staticClass:"form-control",attrs:{id:"select_"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.updatedCamera,"owner_id",e.target.multiple?s:s[0])}}},t._l(t.$store.getters.SIMPLE_USERS,function(e,r){return s("option",{domProps:{value:e.id}},[t._v("\n                                    "+t._s(e.login)+"\n                                ")])}),0)]),t._v(" "),t.updatedCamera.error?s("div",{staticClass:"alert alert-danger my-2"},[t._v("\n                            "+t._s(t.updatedCamera.error)+"\n                        ")]):t._e()])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.updateCamera()}}},[t._v("Обновить")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[this._v("Добавить камеру")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"updateLabel"}},[this._v("Обновить камеру")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var y=s("VU/8")($,x,!1,function(t){s("qzF9")},"data-v-6dac6c40",null).exports,q=(s("162o"),{name:"Users",data:function(){return{newUser:{login:"",password:"",name:"",is_admin:!1},updatedUser:{id:null,login:"",password:"a",name:"",is_admin:!1,error:null}}},computed:{users:function(){return this.$store.getters.USERS}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("/login"),this.$store.dispatch("usersRequest")},methods:{openModal:function(){_()("#exampleModal").modal("toggle"),this.newUser.error=null},openUpdate:function(t){_()("#updateModal").modal("toggle"),this.updatedUser.error=null;var e,s=this.users.find(function(e){return e.id===t});e=!!s.is_admin,this.updatedUser.id=s.id,this.updatedUser.login=s.login,this.updatedUser.password=s.pass,this.updatedUser.name=s.name,this.updatedUser.is_admin=e},saveUser:function(){var t=f()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.validate_user(),console.log(this.newUser.error),this.newUser.error){t.next=8;break}return t.next=5,this.$store.dispatch("createUser",{login:this.newUser.login,password:this.newUser.password,is_admin:this.newUser.is_admin,name:this.newUser.name});case 5:return t.sent,t.next=8,this.$store.dispatch("usersRequest");case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),usersRequest:function(){this.$store.dispatch("usersRequest")},deleteUser:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.$store.dispatch("deleteUser",t);case 2:return s.sent,s.next=5,e.$store.dispatch("usersRequest");case 5:case"end":return s.stop()}},s,e)}))()},updateUser:function(t){var e=this;return f()(p.a.mark(function s(){var r;return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(r=e.validateUser(e.updatedUser),console.log(r),!r){s.next=7;break}return e.updatedUser.error=r,s.abrupt("return");case 7:return s.next=9,e.$store.dispatch("updateUser",{id:t,login:e.updatedUser.login,password:e.updatedUser.password,is_admin:e.updatedUser.is_admin,name:e.updatedUser.name});case 9:return s.sent,s.next=12,e.$store.dispatch("usersRequest");case 12:case"end":return s.stop()}},s,e)}))()},validateNewUser:function(t){var e=null;return t.login.length<=6&&(e="Логин слишком маленький"),t.login.length>=32&&(e="Логин слишком большой"),t.password.length<=6&&(e="Пароль слишком маленький"),t.password.length>=32&&(e="Пароль слишком большой"),/^[a-zA-Z][a-zA-Z0-9]+$/gi.test(t.login)||(e="Недопустимые символы в логине"),/^[a-zA-Z0-9]+$/gi.test(t.password)||(e="Недопустимые символы в пароле"),e},validateUser:function(t){var e=null;return t.login.length<=6&&(e="Логин слишком маленький"),t.login.length>=32&&(e="Логин слишком большой"),t.password.length<=6&&(e="Пароль слишком маленький"),t.password.length>=32&&(e="Пароль слишком большой"),/^[a-zA-Z][a-zA-Z0-9]+$/gi.test(t.login)||(e="Недопустимые символы в логине"),/^[a-zA-Z0-9]+$/gi.test(t.password)||(e="Недопустимые символы в пароле"),this.newUser.name.length<=3&&(e="Имя слишком маленькое"),this.newUser.name.length>=32&&(e="Имя слишком маленькое"),e},validateCamera:function(t){var e=null;return t.connection_string.length<=4&&(e="Строка подключения слишком мала"),t.name.length<=4&&(e="Имя слишком маленькое"),e},validate_user:function(){var t=null;this.newUser.login.length<=6&&(t="Логин слишком маленький"),this.newUser.login.length>=32&&(t="Логин слишком большой"),this.newUser.password.length<=6&&(t="Пароль слишком маленький"),this.newUser.password.length>=32&&(t="Пароль слишком большой"),/^[a-zA-Z][a-zA-Z0-9]+$/gi.test(this.newUser.login)||(t="Недопустимые символы в логине"),/^[a-zA-Z0-9]+$/gi.test(this.newUser.password)||(t="Недопустимые символы в пароле"),this.newUser.name.length<=3&&(t="Имя слишком маленькое"),this.newUser.name.length>=32&&(t="Имя слишком маленькое"),this.newUser.error=t||null}}}),A={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"wrapper"}},[s("h1",[t._v("Пользователи")]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{id:"btn","data-toggle":"modal"},on:{click:function(e){return t.openModal()}}},[t._v("\n        Добавить пользователя\n    ")]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"users d-flex justify-content-start flex-wrap"},t._l(t.users,function(e,r){return s("div",{key:r,staticClass:"user p-1 col-sm-12 col-md-5 col-lg-4 col-xl-3"},[s("div",{staticClass:"p-1 card shadow-sm"},[s("h3",[t._v(t._s(e.name))]),t._v(" "),s("hr"),t._v(" "),s("h4",[t._v("Логин: "+t._s(e.login))]),t._v(" "),s("h4",[t._v("Пароль: "+t._s(e.pass))]),t._v(" "),s("h4",[t._v("ID: "+t._s(e.id))]),t._v(" "),s("h4",[t._v(t._s(e.is_admin?"Админ":"Не админ"))]),t._v(" "),s("div",{staticClass:" my-1"},[s("button",{staticClass:"btn btn-warning",on:{click:function(s){return t.openUpdate(e.id)}}},[t._v("Изменить")]),t._v(" "),s("button",{staticClass:"btn btn-danger",on:{click:function(s){return t.deleteUser(e.id)}}},[t._v("Удалить")])])])])}),0),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),s("div",{staticClass:"modal-body"},[s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"log"}},[t._v("Логин")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.login,expression:"newUser.login"}],staticClass:"form-control",attrs:{type:"text",id:"log"},domProps:{value:t.newUser.login},on:{input:[function(e){e.target.composing||t.$set(t.newUser,"login",e.target.value)},function(e){return t.validate_user()}]}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Имя")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.name,expression:"newUser.name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.newUser.name},on:{input:[function(e){e.target.composing||t.$set(t.newUser,"name",e.target.value)},function(e){return t.validate_user()}]}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"pass"}},[t._v("Пароль")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.password,expression:"newUser.password"}],staticClass:"form-control",attrs:{type:"text",id:"pass"},domProps:{value:t.newUser.password},on:{input:[function(e){e.target.composing||t.$set(t.newUser,"password",e.target.value)},function(e){return t.validate_user()}]}})]),t._v(" "),s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.is_admin,expression:"newUser.is_admin"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheck1"},domProps:{checked:Array.isArray(t.newUser.is_admin)?t._i(t.newUser.is_admin,null)>-1:t.newUser.is_admin},on:{change:function(e){var s=t.newUser.is_admin,r=e.target,a=!!r.checked;if(Array.isArray(s)){var n=t._i(s,null);r.checked?n<0&&t.$set(t.newUser,"is_admin",s.concat([null])):n>-1&&t.$set(t.newUser,"is_admin",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.newUser,"is_admin",a)}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"customCheck1"}},[t._v("\n                                Это администратор?\n                            ")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.newUser.error,expression:"newUser.error"}],staticClass:"alert alert-danger my-2"},[t._v("\n                            "+t._s(t.newUser.error)+"\n                        ")])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.saveUser()}}},[t._v("Создать")])])])])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"updateModal",tabindex:"-1",role:"dialog","aria-labelledby":"updateModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),s("div",{staticClass:"modal-body"},[s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"log"}},[t._v("Логин")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedUser.login,expression:"updatedUser.login"}],staticClass:"form-control",attrs:{type:"text",id:"log1"},domProps:{value:t.updatedUser.login},on:{input:function(e){e.target.composing||t.$set(t.updatedUser,"login",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Имя")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedUser.name,expression:"updatedUser.name"}],staticClass:"form-control",attrs:{type:"text",id:"name1"},domProps:{value:t.updatedUser.name},on:{input:function(e){e.target.composing||t.$set(t.updatedUser,"name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"pass1"}},[t._v("Пароль")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedUser.password,expression:"updatedUser.password"}],staticClass:"form-control",attrs:{type:"text",id:"pass1"},domProps:{value:t.updatedUser.password},on:{input:function(e){e.target.composing||t.$set(t.updatedUser,"password",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedUser.is_admin,expression:"updatedUser.is_admin"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheck12"},domProps:{checked:Array.isArray(t.updatedUser.is_admin)?t._i(t.updatedUser.is_admin,null)>-1:t.updatedUser.is_admin},on:{change:function(e){var s=t.updatedUser.is_admin,r=e.target,a=!!r.checked;if(Array.isArray(s)){var n=t._i(s,null);r.checked?n<0&&t.$set(t.updatedUser,"is_admin",s.concat([null])):n>-1&&t.$set(t.updatedUser,"is_admin",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.updatedUser,"is_admin",a)}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"customCheck12"}},[t._v("\n                                Это администратор?\n                            ")])]),t._v(" "),t.updatedUser.error?s("div",{staticClass:"alert alert-danger my-2"},[t._v("\n                            "+t._s(t.updatedUser.error)+"\n                        ")]):t._e()])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.updateUser(t.updatedUser.id)}}},[t._v("Обновить")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[this._v("Создать пользователя")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"updateModalLabel"}},[this._v("Обновить пользователя")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var P=s("VU/8")(q,A,!1,function(t){s("K+1A")},"data-v-df56d568",null).exports,U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper container-fluid"},[s("h3",[t._v(" "+t._s(t.camera().name))]),t._v(" "),s("img",{staticClass:"d-block mx-auto img-fluid",attrs:{src:t.$store.getters.API.url+"/proxy/"+t.camera().connection_string,id:"camera",alt:""}}),t._v(" "),s("div",{staticClass:"row d-flex justify-content-center"},[s("button",{staticClass:"btn btn-primary m-1",on:{click:function(e){return t.before()}}},[t._v(" ← ")]),t._v(" "),s("button",{staticClass:"btn btn-primary m-1",on:{click:function(e){return t.next()}}},[t._v(" → ")])])])},staticRenderFns:[]};var j=s("VU/8")({name:"Home",data:function(){return{current_camera:0,width:300,height:300}},computed:{},beforeCreate:function(){!1!==this.$store.getters.SELF.logged?(this.$store.dispatch("usersRequest"),this.$store.dispatch("camerasRequest")):this.$router.push("/login")},methods:{cameras_amount:function(){return this.$store.getters.CAMERAS.length},camera:function(){var t=this.$store.getters.CAMERAS[this.current_camera];return t},next:function(){this.current_camera+1>=this.cameras_amount()?this.current_camera=0:this.current_camera++},before:function(){this.current_camera-1<0?this.current_camera=this.cameras_amount()-1:this.current_camera--}}},U,!1,function(t){s("feQQ")},"data-v-15a1b9c0",null).exports,I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"wrapper "}},[s("h1",[t._v("Chats")]),t._v(" "),s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.updateUsers()}}},[t._v("Обновить пользователей")]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"chats row"},t._l(t.users,function(e,r){return s("div",{key:r,staticClass:"user card shadow-sm m-2 p-2 col-sm-10 col-md-5 col-lg-4 col-xl-3"},[s("h4",[t._v(t._s(e.name))]),t._v(" "),s("hr"),t._v(" "),s("h5",[t._v("Логин: "+t._s(e.login))]),t._v(" "),s("div",{staticClass:" my-1"},[s("button",{staticClass:"btn btn-primary",on:{click:function(s){return t.openChat(e.id)}}},[t._v("Войти в чат")])])])}),0)])},staticRenderFns:[]};var S=s("VU/8")({name:"Chats",data:function(){return{rooms:[]}},computed:{users:function(){return this.$store.getters.SIMPLE_USERS}},mounted:function(){},methods:{updatedUsers:function(){this.$store.dispatch("usersRequest")},openChat:function(t){this.$router.push({name:"chat",params:{id:t}})}}},I,!1,function(t){s("gt74")},"data-v-c816b13c",null).exports,E={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper "},[s("p",{staticClass:"text ",class:t.myMessageSide},[t._v("\n            "+t._s(t.text)+"\n            "),s("br"),t._v(" "),s("span",{staticClass:"text-muted mini"},[t._v("\n                "+t._s(t._createdAt)+"\n            ")])])])},staticRenderFns:[]};var z=s("VU/8")({name:"Message",props:["text","room","user_id","createdAt","id","_id"],data:function(){return{myMess:null}},methods:{},computed:{myMessageSide:function(){return this.myMess?"myMessage":"noMyMessage"},_createdAt:function(){return this.createdAt.split("T")[0]}},created:function(){this.myMess=~~this.user_id==~~this._id}},E,!1,function(t){s("HeMT")},"data-v-63fc8e8e",null).exports,T=s("mtWM"),R=s.n(T),N=(s("OMJi"),{name:"Chat",components:{message:z},data:function(){return{message:"",room_id:null}},computed:{message_length:function(){return this.message.length},messages:function(){return this.$store.getters.MESSAGES},id:function(){return this.$store.getters.SELF.id},offset:function(){return this.$store.getters.MESSAGES.length}},methods:{sendMessage:function(){this.message.length>254?alert("Сообщение слишком большое!"):(this.$store.dispatch("sendMessage",this.message),this.message="")},getMessages:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.get(t.$store.getters.API.url+"/messages/"+t.room_id+"/"+t.offset,{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,t.$store.dispatch("getMessages",s),t.$store.commit("request_status",!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),alert("Ошибка изменения"),t.$store.commit("request_status",!1),console.log(e.t0);case 14:case"end":return e.stop()}},e,t,[[1,9]])}))()},TopScroll:function(){this.$store.getters.REQUEST||0!==window.scrollY||this.getMessages()}},created:function(){window.addEventListener("scroll",this.TopScroll)},destroyed:function(){window.removeEventListener("scroll",this.TopScroll)},watch:{},mounted:function(){var t=this;this.$store.getters.IO.emit("createRoom",this.$route.params.id),0===this.$store.getters.IO.listeners("message").length&&this.$store.getters.IO.on("message",function(e){t.$store.dispatch("getMessage",e)}),this.room_id=this.$route.params.id,this.getMessages()},beforeDestroy:function(){this.$store.getters.IO.emit("leaveRoom",this.room_id),this.$store.dispatch("clearMessages")}}),M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container-fluid "},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-sm-12 messages-box pt-72"},[s("div",{},[s("transition-group",{staticClass:"messages row p-2 mb-1",attrs:{name:"message"}},t._l(t.messages,function(e){return s("message",t._b({key:e.id,staticClass:"col-sm-12 col-md-12 col-lg-12",attrs:{_id:t.id}},"message",e,!1))}),1)],1)])])]),t._v(" "),s("div",{staticClass:"bottom-panel"},[s("div",{staticClass:"pos-rel"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"bottom-input",attrs:{type:"text"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),s("span",{staticClass:"words-amount"},[t._v(t._s(t.message_length)+"/254")])]),t._v(" "),s("div",{staticClass:"btn-block"},[s("button",{staticClass:"bottom-btn",on:{click:function(e){return t.sendMessage()}}},[t._v("Отправить")])])])])},staticRenderFns:[]};var Q=s("VU/8")(N,M,!1,function(t){s("61G4")},"data-v-631c4284",null).exports,L={name:"Coasts",data:function(){return{coast:1,name:"",coasts:[]}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("login")},methods:{addCoasts:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.post(t.$store.getters.API.url+"/coasts",{name:t.name,coast:t.coast},{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,alert("Цена добавлена"),t.coasts.push(s.data),t.$store.commit("request_status",!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Ошибка добавления"),t.$store.commit("request_status",!1);case 14:t.coast=0,t.name="";case 16:case"end":return e.stop()}},e,t,[[1,10]])}))()},getCoasts:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.get(t.$store.getters.API.url+"/coasts",{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,console.log(s.data),t.coasts=s.data,t.$store.commit("request_status",!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Ошибка получения расценок"),t.$store.commit("request_status",!1);case 14:case"end":return e.stop()}},e,t,[[1,10]])}))()},deleteCoasts:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$store.commit("request_status",!0),s.prev=1,s.next=4,R.a.delete(e.$store.getters.API.url+"/coasts/"+t,{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.coasts=e.coasts.filter(function(e){return e.id!==t}),alert("Удалено"),e.$store.commit("request_status",!1),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),alert("Ошибка удаления"),e.$store.commit("request_status",!1);case 14:case"end":return s.stop()}},s,e,[[1,10]])}))()},updateCoasts:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,e.$store.commit("request_status",!0),s.next=4,R.a.put(e.$store.getters.API.url+"/coasts/"+t,{name:e.coasts.find(function(e){return e.id===t}).name,coast:e.coasts.find(function(e){return e.id===t}).coast},{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.getCoasts(),alert("Данные обновлены"),e.$store.commit("request_status",!1),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(0),alert("Ошибка изменения"),e.$store.commit("request_status",!1);case 14:case"end":return s.stop()}},s,e,[[0,10]])}))()}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"form pt-2"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Название работы")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"coast"}},[t._v("Цена работы")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.coast,expression:"coast"}],staticClass:"form-control",attrs:{type:"number",id:"coast",name:"coast"},domProps:{value:t.coast},on:{input:function(e){e.target.composing||(t.coast=e.target.value)}}})]),t._v(" "),s("span",{staticClass:"btn btn-primary",on:{click:function(e){return t.addCoasts()}}},[t._v("\n                Добавить расценку\n            ")])])]),t._v(" "),s("hr",{staticClass:"my-4"}),t._v(" "),s("div",{staticClass:"coasts"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.getCoasts()}}},[t._v("Получить цены")]),t._v(" "),s("div",{staticClass:"coasts row my-2"},t._l(t.coasts,function(e,r){return s("div",{staticClass:" col-sm-12 col-md-6 col-lg-6 coast"},[s("div",{key:r},[s("div",{staticClass:"p-1"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Название работы")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"coast.name"}],staticClass:"form-control",attrs:{type:"text",name:"name"},domProps:{value:e.name},on:{input:function(s){s.target.composing||t.$set(e,"name",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"coast"}},[t._v("Цена работы")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.coast,expression:"coast.coast"}],staticClass:"form-control",attrs:{type:"number",name:"coast"},domProps:{value:e.coast},on:{input:function(s){s.target.composing||t.$set(e,"coast",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-warning",on:{click:function(s){return t.updateCoasts(e.id)}}},[t._v("Изменить")])]),t._v(" "),s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-danger",on:{click:function(s){return t.deleteCoasts(e.id)}}},[t._v("Удалить ")])])])])])])])])}),0)])])},staticRenderFns:[]};var V=s("VU/8")(L,F,!1,function(t){s("r9AI")},"data-v-01ffb80e",null).exports,B={name:"Questions",data:function(){return{question:"",unswer:"",questions:[]}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("login")},methods:{addQuestion:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.post(t.$store.getters.API.url+"/questions",{question:t.question,unswer:t.unswer},{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,alert("Вопрос добавлен"),t.questions.push(s.data),t.$store.commit("request_status",!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Ошибка добавления вопроса"),t.$store.commit("request_status",!0);case 14:t.question="",t.unswer="";case 16:case"end":return e.stop()}},e,t,[[1,10]])}))()},getQuestions:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.get(t.$store.getters.API.url+"/questions",{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,t.questions=s.data,t.$store.commit("request_status",!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t.$store.commit("request_status",!1),alert("Ошибка получения вопросов");case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},deleteQuestions:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$store.commit("request_status",!0),s.prev=1,s.next=4,R.a.delete(e.$store.getters.API.url+"/questions/"+t,{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.questions=e.questions.filter(function(e){return e.id!==t}),alert("Удалено"),e.$store.commit("request_status",!1),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),e.$store.commit("request_status",!1),alert("Ошибка удаления");case 14:case"end":return s.stop()}},s,e,[[1,10]])}))()},updateQuestions:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$store.commit("request_status",!0),s.prev=1,s.next=4,R.a.put(e.$store.getters.API.url+"/questions/"+t,{question:e.questions.find(function(e){return e.id===t}).question,unswer:e.questions.find(function(e){return e.id===t}).unswer},{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.getQuestions(),e.$store.commit("request_status",!1),alert("Данные обновлены"),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),alert("Ошибка изменения"),e.$store.commit("request_status",!1);case 14:case"end":return s.stop()}},s,e,[[1,10]])}))()}}},W={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"form pt-2"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"question"}},[t._v("Вопрос")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.question,expression:"question"}],staticClass:"form-control",attrs:{type:"text",id:"question",name:"question"},domProps:{value:t.question},on:{input:function(e){e.target.composing||(t.question=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"unswer"}},[t._v("Ответ")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.unswer,expression:"unswer"}],staticClass:"form-control",attrs:{type:"text",rows:"3",id:"unswer",name:"unswer"},domProps:{value:t.unswer},on:{input:function(e){e.target.composing||(t.unswer=e.target.value)}}})]),t._v(" "),s("span",{staticClass:"btn btn-primary",on:{click:function(e){return t.addQuestion()}}},[t._v("\n                Добавить вопрос/ответ\n            ")])])]),t._v(" "),s("hr",{staticClass:"my-4"}),t._v(" "),s("div",{staticClass:"coasts"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.getQuestions()}}},[t._v("Получить вопросы")]),t._v(" "),s("div",{staticClass:"coasts row my-2"},t._l(t.questions,function(e,r){return s("div",{staticClass:" col-sm-12 col-md-6 col-lg-6 coast"},[s("div",{key:r},[s("div",{staticClass:"p-1"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Вопрос")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.question,expression:"question.question"}],staticClass:"form-control",attrs:{type:"text",name:"question"},domProps:{value:e.question},on:{input:function(s){s.target.composing||t.$set(e,"question",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"coast"}},[t._v("Ответ")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.unswer,expression:"question.unswer"}],staticClass:"form-control",attrs:{type:"text",name:"unswer"},domProps:{value:e.unswer},on:{input:function(s){s.target.composing||t.$set(e,"unswer",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-warning",on:{click:function(s){return t.updateQuestions(e.id)}}},[t._v("Изменить")])]),t._v(" "),s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-danger",on:{click:function(s){return t.deleteQuestions(e.id)}}},[t._v("Удалить ")])])])])])])])])}),0)])])},staticRenderFns:[]};var O=s("VU/8")(B,W,!1,function(t){s("I9jn")},"data-v-c7f1ddae",null).exports,Z={name:"Benefit",data:function(){return{question:"",unswer:"",benefits:[]}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("login")},methods:{addBenefit:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.post(t.$store.getters.API.url+"/benefit",{question:t.question,unswer:t.unswer},{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,alert("Вопрос добавлен"),t.benefits.push(s.data),t.$store.commit("request_status",!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Ошибка добавления вопроса"),console.log(e.t0),t.$store.commit("request_status",!1);case 15:t.question="",t.unswer="";case 17:case"end":return e.stop()}},e,t,[[1,10]])}))()},getBenefit:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.get(t.$store.getters.API.url+"/benefit",{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,t.benefits=s.data,t.$store.commit("request_status",!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t.$store.commit("request_status",!1),alert("Ошибка получения полезной информации");case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},deleteBenefit:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$store.commit("request_status",!0),s.prev=1,s.next=4,R.a.delete(e.$store.getters.API.url+"/benefit/"+t,{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.benefits=e.benefits.filter(function(e){return e.id!==t}),alert("Удалено"),e.$store.commit("request_status",!1),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),e.$store.commit("request_status",!1),alert("Ошибка удаления");case 14:case"end":return s.stop()}},s,e,[[1,10]])}))()},updateBenefit:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$store.commit("request_status",!0),s.prev=1,s.next=4,R.a.put(e.$store.getters.API.url+"/benefit/"+t,{question:e.benefits.find(function(e){return e.id===t}).question,unswer:e.benefits.find(function(e){return e.id===t}).unswer},{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.getBenefit(),e.$store.commit("request_status",!1),alert("Данные обновлены"),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),alert("Ошибка изменения"),e.$store.commit("request_status",!1);case 14:case"end":return s.stop()}},s,e,[[1,10]])}))()}}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"form pt-2"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"question"}},[t._v("Вопрос")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.question,expression:"question"}],staticClass:"form-control",attrs:{type:"text",id:"question",name:"question"},domProps:{value:t.question},on:{input:function(e){e.target.composing||(t.question=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"unswer"}},[t._v("Полезный ответ")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.unswer,expression:"unswer"}],staticClass:"form-control",attrs:{type:"text",rows:"3",id:"unswer",name:"unswer"},domProps:{value:t.unswer},on:{input:function(e){e.target.composing||(t.unswer=e.target.value)}}})]),t._v(" "),s("span",{staticClass:"btn btn-primary",on:{click:function(e){return t.addBenefit()}}},[t._v("\n                Добавить вопрос/ответ\n            ")])])]),t._v(" "),s("hr",{staticClass:"my-4"}),t._v(" "),s("div",{staticClass:"coasts"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.getBenefit()}}},[t._v("Получить вопросы")]),t._v(" "),s("div",{staticClass:"coasts row my-2"},t._l(t.benefits,function(e,r){return s("div",{staticClass:" col-sm-12 col-md-6 col-lg-6 coast"},[s("div",{key:r},[s("div",{staticClass:"p-1"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"question"}},[t._v("Вопрос")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.question,expression:"benefit.question"}],staticClass:"form-control",attrs:{type:"text",name:"question"},domProps:{value:e.question},on:{input:function(s){s.target.composing||t.$set(e,"question",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"unswer"}},[t._v("Ответ")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.unswer,expression:"benefit.unswer"}],staticClass:"form-control",attrs:{type:"text",name:"unswer"},domProps:{value:e.unswer},on:{input:function(s){s.target.composing||t.$set(e,"unswer",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-warning",on:{click:function(s){return t.updateBenefit(e.id)}}},[t._v("Изменить")])]),t._v(" "),s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-danger",on:{click:function(s){return t.deleteBenefit(e.id)}}},[t._v("Удалить ")])])])])])])])])}),0)])])},staticRenderFns:[]};var J=s("VU/8")(Z,D,!1,function(t){s("VTLO")},"data-v-a0cd33ec",null).exports,G={name:"Benefit",data:function(){return{name:"",desc:"",shir:0,dolg:0,works:[]}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("login")},methods:{openWork:function(t){this.$router.push({name:"work",params:{id:t}})},addWork:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.post(t.$store.getters.API.url+"/work",{name:t.name,desc:t.desc,shir:t.shir,dolg:t.dolg},{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,alert("Работа добавлена"),t.works.push(s.data),t.$store.commit("request_status",!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Ошибка добавления работы"),console.log(e.t0),t.$store.commit("request_status",!1);case 15:t.name="",t.desk="",t.dolg=0,t.shir=0;case 19:case"end":return e.stop()}},e,t,[[1,10]])}))()},getWorks:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.get(t.$store.getters.API.url+"/works",{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,t.works=s.data,t.$store.commit("request_status",!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t.$store.commit("request_status",!1),alert("Ошибка получения работ");case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},deleteWork:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$store.commit("request_status",!0),s.prev=1,s.next=4,R.a.delete(e.$store.getters.API.url+"/work/"+t,{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.works=e.works.filter(function(e){return e.id!==t}),alert("Удалено"),e.$store.commit("request_status",!1),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),e.$store.commit("request_status",!1),alert("Ошибка удаления");case 14:case"end":return s.stop()}},s,e,[[1,10]])}))()}}},H={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"form pt-2"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"question"}},[t._v("Название")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"question",name:"question"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"unswer"}},[t._v("Описание")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.desc,expression:"desc"}],staticClass:"form-control",attrs:{type:"text",rows:"5",id:"unswer",name:"unswer"},domProps:{value:t.desc},on:{input:function(e){e.target.composing||(t.desc=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"form-group col-6"},[s("label",{attrs:{for:"shir"}},[t._v("Широта")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.shir,expression:"shir"}],staticClass:"form-control",attrs:{type:"text",id:"shir",name:"shir"},domProps:{value:t.shir},on:{input:function(e){e.target.composing||(t.shir=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group col-6"},[s("label",{attrs:{for:"unswer"}},[t._v("Долгота")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.dolg,expression:"dolg"}],staticClass:"form-control",attrs:{type:"text",id:"dolg",name:"dolg"},domProps:{value:t.dolg},on:{input:function(e){e.target.composing||(t.dolg=e.target.value)}}})])]),t._v(" "),s("span",{staticClass:"btn btn-primary",on:{click:function(e){return t.addWork()}}},[t._v("\n                Добавить Выполненную работу\n            ")])])]),t._v(" "),s("hr",{staticClass:"my-4"}),t._v(" "),s("div",{staticClass:"coasts"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.getWorks()}}},[t._v("Получить работы")]),t._v(" "),s("div",{staticClass:"coasts row my-2"},t._l(t.works,function(e,r){return s("div",{staticClass:" col-sm-12 col-md-6 col-lg-6 coast"},[s("div",{key:r},[s("div",{staticClass:"p-1"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"question"}},[t._v("Название")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"work.name"}],staticClass:"form-control",attrs:{type:"text",name:"question"},domProps:{value:e.name},on:{input:function(s){s.target.composing||t.$set(e,"name",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"unswer"}},[t._v("Описание")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.desc,expression:"work.desc"}],staticClass:"form-control",attrs:{type:"text",name:"unswer"},domProps:{value:e.desc},on:{input:function(s){s.target.composing||t.$set(e,"desc",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-warning",on:{click:function(s){return t.openWork(e.id)}}},[t._v("\n                                              Перейти к работе\n                                        ")])]),t._v(" "),s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-danger",on:{click:function(s){return t.deleteWork(e.id)}}},[t._v("Удалить ")])])])])])])])])}),0)])])},staticRenderFns:[]};var K=s("VU/8")(G,H,!1,function(t){s("MIEL")},null,null).exports,Y={name:"Work",data:function(){return{work_id:null,image:null,work:{}}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("login")},mounted:function(){this.work_id=this.$route.params.id,this.getWork()},methods:{getWork:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.get(t.$store.getters.API.url+"/work/"+t.work_id,{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,t.work=s.data[0],t.$store.commit("request_status",!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),alert("Ошибка получения работы"),console.log(e.t0),t.$store.commit("request_status",!1);case 14:case"end":return e.stop()}},e,t,[[1,9]])}))()},updateWork:function(){var t=this;return f()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.put(t.$store.getters.API.url+"/work/"+t.work_id,{name:t.work.name,desc:t.work.desc,shir:t.work.shir,dolg:t.work.dolg},{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:e.sent,t.$store.commit("request_status",!1),alert("Работа обновленна"),t.getWork(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Ошибка обновления работы"),console.log(e.t0),t.$store.commit("request_status",!1);case 15:case"end":return e.stop()}},e,t,[[1,10]])}))()},uploadImage:function(){var t=this;return f()(p.a.mark(function e(){var s,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(s=document.getElementById("img").files[0])&&((r=new FormData).append("img",s),t.$store.commit("request_status",!0),R.a.post(t.$store.getters.API.url+"/work/"+t.work_id+"/image",r,{headers:{"Content-Type":"multipart/form-data",Authorization:t.$store.getters.API.token}}).then(function(e){alert("Картинка добавлена!"),t.getWork(),t.$store.commit("request_status",!1)}).catch(function(e){alert("Ошибка добавления картинки"),t.$store.commit("request_status",!1)}));case 2:case"end":return e.stop()}},e,t)}))()},deleteImage:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e.$store.commit("request_status",!0),R.a.delete(e.$store.getters.API.url+"/work/\n                          "+e.work_id+"/delete-image/"+t,{headers:{Authorization:e.$store.getters.API.token}}).then(function(s){e.work.images=e.work.images.filter(function(e){return e!=t}),e.$store.commit("request_status",!1),alert("Картина удалена")}).catch(function(t){alert("Ошибка удаления"),e.$store.commit("request_status",!1)});case 2:case"end":return s.stop()}},s,e)}))()}}},X={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"form pt-2"},[r("form",{staticClass:"card p-2"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"question"}},[t._v("Название")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.work.name,expression:"work.name"}],staticClass:"form-control",attrs:{type:"text",id:"question",name:"question"},domProps:{value:t.work.name},on:{input:function(e){e.target.composing||t.$set(t.work,"name",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"unswer"}},[t._v("Описание")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.work.desc,expression:"work.desc"}],staticClass:"form-control",attrs:{type:"text",rows:"5",id:"unswer",name:"unswer"},domProps:{value:t.work.desc},on:{input:function(e){e.target.composing||t.$set(t.work,"desc",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"form-group col-6"},[r("label",{attrs:{for:"shir"}},[t._v("Широта")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.work.shir,expression:"work.shir"}],staticClass:"form-control",attrs:{type:"number",id:"shir",name:"shir"},domProps:{value:t.work.shir},on:{input:function(e){e.target.composing||t.$set(t.work,"shir",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group col-6"},[r("label",{attrs:{for:"unswer"}},[t._v("Долгота")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.work.dolg,expression:"work.dolg"}],staticClass:"form-control",attrs:{type:"number",id:"dolg",name:"dolg"},domProps:{value:t.work.dolg},on:{input:function(e){e.target.composing||t.$set(t.work,"dolg",e.target.value)}}})])]),t._v(" "),r("span",{staticClass:"btn btn-primary",on:{click:function(e){return t.updateWork()}}},[t._v("\n                Обновить\n            ")])])]),t._v(" "),r("div",{staticClass:"form mt-2"},[r("form",{staticClass:"card p-2",attrs:{enctype:"multipart/form-data"}},[r("div",{staticClass:"images p-2 row"},t._l(t.work.images,function(e,a){return r("div",{key:a,staticClass:"col-6 position-relative"},[r("div",{staticClass:"position-absolute delete-img"},[r("img",{attrs:{src:s("KuaY"),alt:"удалить"},on:{click:function(s){return t.deleteImage(e)}}})]),t._v(" "),r("img",{staticClass:"img-thumbnail m-1",attrs:{src:t.$store.getters.API.url+"/uploads/"+e,alt:"img"}})])}),0),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"img"}},[t._v("Выбрать картинку")]),t._v(" "),r("input",{staticClass:"btn btn-primary form-control",attrs:{type:"file",id:"img",name:"img"}}),t._v(" "),r("span",{staticClass:"btn btn-primary mt-2",on:{click:function(e){return t.uploadImage()}}},[t._v("Добавить картинку")])])])]),t._v(" "),r("hr",{staticClass:"my-2"}),t._v(" "),r("div",{staticClass:"map row justify-content-center"},[r("div",{staticClass:"mapouter col-12"},[r("div",{staticClass:"gmap_canvas"},[r("iframe",{attrs:{width:"100%",height:"300",id:"gmap_canvas",src:"https://maps.google.com/maps?q="+t.work.shir+","+t.work.dolg+"&t=&z=13&ie=UTF8&iwloc=&output=embed",frameborder:"0",scrolling:"no",marginheight:"0",marginwidth:"0"}})])])])])},staticRenderFns:[]};var tt=s("VU/8")(Y,X,!1,function(t){s("SZVQ")},null,null).exports,et={name:"News",data:function(){return{newest:"",description:"",link:"",news:[]}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("login")},methods:{addQuestion:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.post(t.$store.getters.API.url+"/news",{news:t.newest,description:t.description,link:t.link},{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,alert("Новинка добавлена"),t.news.push(s.data),t.$store.commit("request_status",!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Ошибка добавления новинки"),t.$store.commit("request_status",!1);case 14:t.newest="",t.description="",t.link="";case 17:case"end":return e.stop()}},e,t,[[1,10]])}))()},getQuestions:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.get(t.$store.getters.API.url+"/news",{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,t.news=s.data,t.$store.commit("request_status",!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t.$store.commit("request_status",!1),alert("Ошибка получения вопросов");case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},deleteQuestions:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$store.commit("request_status",!0),s.prev=1,s.next=4,R.a.delete(e.$store.getters.API.url+"/news/"+t,{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.news=e.news.filter(function(e){return e.id!==t}),alert("Удалено"),e.$store.commit("request_status",!1),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),e.$store.commit("request_status",!1),alert("Ошибка удаления");case 14:case"end":return s.stop()}},s,e,[[1,10]])}))()},updateQuestions:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$store.commit("request_status",!0),s.prev=1,s.next=4,R.a.put(e.$store.getters.API.url+"/news/"+t,{news:e.news.find(function(e){return e.id===t}).news,description:e.news.find(function(e){return e.id===t}).description,link:e.news.find(function(e){return e.id===t}).link},{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.getQuestions(),e.$store.commit("request_status",!1),alert("Данные обновлены"),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),alert("Ошибка изменения"),e.$store.commit("request_status",!1);case 14:case"end":return s.stop()}},s,e,[[1,10]])}))()}}},st={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"form pt-2"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"question"}},[t._v("Новинка")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newest,expression:"newest"}],staticClass:"form-control",attrs:{type:"text",id:"question",name:"question"},domProps:{value:t.newest},on:{input:function(e){e.target.composing||(t.newest=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"question"}},[t._v("Ссылка")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"link"}],staticClass:"form-control",attrs:{type:"text",id:"question",name:"question"},domProps:{value:t.link},on:{input:function(e){e.target.composing||(t.link=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"description"}},[t._v("Описание")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",rows:"3",id:"description",name:"description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),t._v(" "),s("span",{staticClass:"btn btn-primary",on:{click:function(e){return t.addQuestion()}}},[t._v("\n                Добавить новинку\n            ")])])]),t._v(" "),s("hr",{staticClass:"my-4"}),t._v(" "),s("div",{staticClass:"coasts"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.getQuestions()}}},[t._v("Получить Новинки")]),t._v(" "),s("div",{staticClass:"coasts row my-2"},t._l(t.news,function(e,r){return s("div",{staticClass:" col-sm-12 col-md-6 col-lg-6 coast"},[s("div",{key:r},[s("div",{staticClass:"p-1"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Вопрос")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.news,expression:"ne.news"}],staticClass:"form-control",attrs:{type:"text",name:"question"},domProps:{value:e.news},on:{input:function(s){s.target.composing||t.$set(e,"news",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Ссылка")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.link,expression:"ne.link"}],staticClass:"form-control",attrs:{type:"text",name:"question"},domProps:{value:e.link},on:{input:function(s){s.target.composing||t.$set(e,"link",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"coast"}},[t._v("Ответ")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"ne.description"}],staticClass:"form-control",attrs:{type:"text",name:"description"},domProps:{value:e.description},on:{input:function(s){s.target.composing||t.$set(e,"description",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-warning",on:{click:function(s){return t.updateQuestions(e.id)}}},[t._v("Изменить")])]),t._v(" "),s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-danger",on:{click:function(s){return t.deleteQuestions(e.id)}}},[t._v("Удалить")])])])])])])])])}),0)])])},staticRenderFns:[]};var rt=s("VU/8")(et,st,!1,function(t){s("5q4t")},"data-v-7375499d",null).exports,at={name:"Bonuses",data:function(){return{bonuses:"",unswer:"",link:"",questions:[]}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("login")},methods:{addQuestion:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.post(t.$store.getters.API.url+"/bonuses",{bonuses:t.bonuses,unswer:t.unswer,link:t.link},{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,alert("Бонус добавлен"),t.questions.push(s.data),t.$store.commit("request_status",!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Ошибка добавления бонуса"),t.$store.commit("request_status",!0);case 14:t.question="",t.unswer="";case 16:case"end":return e.stop()}},e,t,[[1,10]])}))()},getQuestions:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.get(t.$store.getters.API.url+"/bonuses",{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,t.questions=s.data,t.$store.commit("request_status",!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t.$store.commit("request_status",!1),alert("Ошибка получения вопросов");case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},deleteQuestions:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$store.commit("request_status",!0),s.prev=1,s.next=4,R.a.delete(e.$store.getters.API.url+"/bonuses/"+t,{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.questions=e.questions.filter(function(e){return e.id!==t}),alert("Удалено"),e.$store.commit("request_status",!1),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),e.$store.commit("request_status",!1),alert("Ошибка удаления");case 14:case"end":return s.stop()}},s,e,[[1,10]])}))()},updateQuestions:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$store.commit("request_status",!0),s.prev=1,s.next=4,R.a.put(e.$store.getters.API.url+"/bonuses/"+t,{bonuses:e.questions.find(function(e){return e.id===t}).bonuses,unswer:e.questions.find(function(e){return e.id===t}).unswer,link:e.questions.find(function(e){return e.id===t}).link},{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.getQuestions(),e.$store.commit("request_status",!1),alert("Данные обновлены"),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),alert("Ошибка изменения"),e.$store.commit("request_status",!1);case 14:case"end":return s.stop()}},s,e,[[1,10]])}))()}}},nt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"form pt-2"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"question"}},[t._v("Бонус")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.bonuses,expression:"bonuses"}],staticClass:"form-control",attrs:{type:"text",id:"question",name:"question"},domProps:{value:t.bonuses},on:{input:function(e){e.target.composing||(t.bonuses=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"question"}},[t._v("Ссылка")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"link"}],staticClass:"form-control",attrs:{type:"text",id:"link",name:"link"},domProps:{value:t.link},on:{input:function(e){e.target.composing||(t.link=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"unswer"}},[t._v("Описание")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.unswer,expression:"unswer"}],staticClass:"form-control",attrs:{type:"text",rows:"3",id:"unswer",name:"unswer"},domProps:{value:t.unswer},on:{input:function(e){e.target.composing||(t.unswer=e.target.value)}}})]),t._v(" "),s("span",{staticClass:"btn btn-primary",on:{click:function(e){return t.addQuestion()}}},[t._v("\n                Добавить Бонус\n            ")])])]),t._v(" "),s("hr",{staticClass:"my-4"}),t._v(" "),s("div",{staticClass:"coasts"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.getQuestions()}}},[t._v("Получить вопросы")]),t._v(" "),s("div",{staticClass:"coasts row my-2"},t._l(t.questions,function(e,r){return s("div",{staticClass:" col-sm-12 col-md-6 col-lg-6 coast"},[s("div",{key:r},[s("div",{staticClass:"p-1"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Бонус")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.bonuses,expression:"question.bonuses"}],staticClass:"form-control",attrs:{type:"text",name:"question"},domProps:{value:e.bonuses},on:{input:function(s){s.target.composing||t.$set(e,"bonuses",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Ссылка")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.link,expression:"question.link"}],staticClass:"form-control",attrs:{type:"text",name:"question"},domProps:{value:e.link},on:{input:function(s){s.target.composing||t.$set(e,"link",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"coast"}},[t._v("Описание")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.unswer,expression:"question.unswer"}],staticClass:"form-control",attrs:{type:"text",name:"unswer"},domProps:{value:e.unswer},on:{input:function(s){s.target.composing||t.$set(e,"unswer",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-warning",on:{click:function(s){return t.updateQuestions(e.id)}}},[t._v("Изменить")])]),t._v(" "),s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-danger",on:{click:function(s){return t.deleteQuestions(e.id)}}},[t._v("Удалить ")])])])])])])])])}),0)])])},staticRenderFns:[]};var ot=s("VU/8")(at,nt,!1,function(t){s("GMqv")},"data-v-30b995b2",null).exports,it={name:"Benefit",data:function(){return{name:"",user_id:"",projects:[]}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("login")},methods:{openProject:function(t){this.$router.push({name:"project",params:{id:t}})},addProject:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.post(t.$store.getters.API.url+"/project",{name:t.name,user_id:t.user_id},{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,alert("Проект добавлена"),t.projects.push(s.data),t.$store.commit("request_status",!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Ошибка добавления проекта"),console.log(e.t0),t.$store.commit("request_status",!1);case 15:t.name="",t.desk="";case 17:case"end":return e.stop()}},e,t,[[1,10]])}))()},getProjects:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.get(t.$store.getters.API.url+"/projects",{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,t.projects=s.data,t.$store.commit("request_status",!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t.$store.commit("request_status",!1),alert("Ошибка получения проектов");case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},deleteProject:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$store.commit("request_status",!0),s.prev=1,s.next=4,R.a.delete(e.$store.getters.API.url+"/project/"+t,{headers:{"Content-Type":"application/json",Authorization:e.$store.getters.API.token}});case 4:s.sent,e.projects=e.projects.filter(function(e){return e.id!==t}),alert("Удалено"),e.$store.commit("request_status",!1),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),e.$store.commit("request_status",!1),alert("Ошибка удаления");case 14:case"end":return s.stop()}},s,e,[[1,10]])}))()}},mounted:function(){this.$store.dispatch("usersRequest")}},ct={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"form pt-2"},[s("form",{staticClass:"card p-2"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"question"}},[t._v("Название")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"question",name:"question"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"select"}},[t._v("Пользователь")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.user_id,expression:"user_id"}],staticClass:"form-control",attrs:{id:"select"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.user_id=e.target.multiple?s:s[0]}}},t._l(t.$store.getters.SIMPLE_USERS,function(e,r){return s("option",{key:r,domProps:{value:e.id}},[t._v("\n                        "+t._s(e.login)+"\n                    ")])}),0)]),t._v(" "),s("span",{staticClass:"btn btn-primary",on:{click:function(e){return t.addProject()}}},[t._v("\n                Добавить Проект\n            ")])])]),t._v(" "),s("hr",{staticClass:"my-4"}),t._v(" "),s("div",{staticClass:"coasts"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.getProjects()}}},[t._v("Получить проекты")]),t._v(" "),s("div",{staticClass:"coasts row my-2"},t._l(t.projects,function(e,r){return s("div",{staticClass:" col-sm-12 col-md-6 col-lg-6 coast"},[s("div",{key:r},[s("div",{staticClass:"p-1"},[s("div",{staticClass:"card p-2"},[s("h5",[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-warning",on:{click:function(s){return t.openProject(e.id)}}},[t._v("\n                                            Перейти к проекту\n                                    ")])]),t._v(" "),s("div",{staticClass:"col-6"},[s("span",{staticClass:"btn btn-danger",on:{click:function(s){return t.deleteProject(e.id)}}},[t._v("Удалить ")])])])])])])])}),0)])])},staticRenderFns:[]};var ut=s("VU/8")(it,ct,!1,function(t){s("BnTX")},null,null).exports,lt={name:"Project",data:function(){return{description:"",project_id:null,image:null,new_step:"",project:{}}},beforeCreate:function(){!1===this.$store.getters.SELF.logged&&this.$router.push("login")},mounted:function(){this.project_id=this.$route.params.id,this.getProject()},computed:{steps_length:function(){return this.project.steps.steps.length}},methods:{go_botoom:function(t){if(!(t>=this.steps_length-1)){var e=this.project.steps.steps[t].number;this.project.steps.steps[t].number=e+1,this.project.steps.steps[t+1].number=e,this.sort_steps()}},go_top:function(t){if(!(t<=0)){var e=this.project.steps.steps[t].number;this.project.steps.steps[t].number=e-1,this.project.steps.steps[t-1].number=e,this.sort_steps()}},del_step:function(t){this.project.steps.steps=this.project.steps.steps.filter(function(e){return e.number!=t}),this.renum_steps()},renum_steps:function(){for(var t=0;t<=this.steps_length;t++)this.project.steps.steps[t].number=t},sort_steps:function(){this.project.steps.steps=this.project.steps.steps.sort(function(t,e){return t.number>e.number?1:t.number<e.number?-1:0})},addStep:function(){this.project.steps.steps.push({name:this.new_step,number:this.steps_length,completed:!1,images:[]}),this.new_step=""},getProject:function(){var t=this;return f()(p.a.mark(function e(){var s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.get(t.$store.getters.API.url+"/project/"+t.project_id,{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:s=e.sent,t.project=s.data,t.$store.commit("request_status",!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),alert("Ошибка получения Проекта"),t.$store.commit("request_status",!1);case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},updateProject:function(){var t=this;return f()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("request_status",!0),e.prev=1,e.next=4,R.a.put(t.$store.getters.API.url+"/project/"+t.project_id,{name:t.project.name,user_id:t.project.user_id,percents:t.project.percents,steps:t.project.steps},{headers:{"Content-Type":"application/json",Authorization:t.$store.getters.API.token}});case 4:e.sent,t.$store.commit("request_status",!1),alert("Работа обновленна"),t.getProject(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Ошибка обновления работы"),t.$store.commit("request_status",!1);case 14:case"end":return e.stop()}},e,t,[[1,10]])}))()},uploadImage:function(){var t=this;return f()(p.a.mark(function e(){var s,r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=document.getElementById("img").files[0],r=t.description,s&&((a=new FormData).append("img",s),a.append("image_desc",r),t.$store.commit("request_status",!0),R.a.post(t.$store.getters.API.url+"/project/"+t.project_id+"/image",a,{headers:{"Content-Type":"multipart/form-data",Authorization:t.$store.getters.API.token}}).then(function(e){alert("Картинка добавлена!"),t.getProject(),t.$store.commit("request_status",!1)}).catch(function(e){alert("Ошибка добавления картинки"),t.$store.commit("request_status",!1)}).finally(function(){return t.image_desc=""}));case 3:case"end":return e.stop()}},e,t)}))()},deleteImage:function(t){var e=this;return f()(p.a.mark(function s(){return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e.$store.commit("request_status",!0),R.a.delete(e.$store.getters.API.url+"/project/\n                          "+e.project_id+"/delete-image/"+t,{headers:{Authorization:e.$store.getters.API.token}}).then(function(s){e.project.images=e.project.images.filter(function(e){return e.path!=t}),e.$store.commit("request_status",!1),alert("Картина удалена")}).catch(function(t){alert("Ошибка удаления"),e.$store.commit("request_status",!1)});case 2:case"end":return s.stop()}},s,e)}))()}}},dt={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"form pt-2"},[r("form",{staticClass:"card p-2"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[t._v("Название")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.project.name,expression:"project.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"name"},domProps:{value:t.project.name},on:{input:function(e){e.target.composing||t.$set(t.project,"name",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"percents"}},[t._v("Выполнено на (проценты)(от 0 до 100)")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.project.percents,expression:"project.percents"}],staticClass:"form-control",attrs:{type:"number",name:"percents",id:"percents"},domProps:{value:t.project.percents},on:{input:function(e){e.target.composing||t.$set(t.project,"percents",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"select"}},[t._v("Пользователь")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.project.user_id,expression:"project.user_id"}],staticClass:"form-control",attrs:{id:"select"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.project,"user_id",e.target.multiple?s:s[0])}}},t._l(t.$store.getters.SIMPLE_USERS,function(e,s){return r("option",{domProps:{value:t.project.user_id}},[t._v("\n                        "+t._s(e.login)+"\n                    ")])}),0)]),t._v(" "),r("hr",{staticClass:"my-2"}),t._v(" "),r("div",{staticClass:"form-group row"},[r("div",{staticClass:"col-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.new_step,expression:"new_step"}],staticClass:"form-control",attrs:{type:"text",name:"percents",id:"percents"},domProps:{value:t.new_step},on:{input:function(e){e.target.composing||(t.new_step=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"col-4"},[r("span",{staticClass:"btn btn-primary",on:{click:function(e){return t.addStep()}}},[t._v("Добавить шаг")])])]),t._v(" "),r("div",{staticClass:"form-group my-4"},t._l(t.project.steps.steps,function(e,s){return r("div",{key:s,staticClass:"step  p-2"},[r("div",{staticClass:"border p-1"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("span",[t._v(t._s(e.name))]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.completed,expression:"step.completed"}],staticClass:"form-controll",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.completed)?t._i(e.completed,null)>-1:e.completed},on:{change:function(s){var r=e.completed,a=s.target,n=!!a.checked;if(Array.isArray(r)){var o=t._i(r,null);a.checked?o<0&&t.$set(e,"completed",r.concat([null])):o>-1&&t.$set(e,"completed",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(e,"completed",n)}}})]),t._v(" "),r("div",{staticClass:"col-3 d-flex flex-column"},[r("span",{staticClass:"cursor",on:{click:function(s){return t.go_top(e.number)}}},[t._v("Вверх")]),t._v(" "),r("span",{staticClass:"cursor",on:{click:function(s){return t.go_botoom(e.number)}}},[t._v("Вниз")])]),t._v(" "),r("div",{staticClass:"col-3"},[r("span",{staticClass:"cursor",on:{click:function(s){return t.del_step(e.number)}}},[t._v("Удалить")])])])])])}),0),t._v(" "),r("span",{staticClass:"btn btn-primary mt-4",on:{click:function(e){return t.updateProject()}}},[t._v("\n                Обновить\n            ")])])]),t._v(" "),r("div",{staticClass:"form mt-2"},[r("form",{staticClass:"card p-2",attrs:{enctype:"multipart/form-data"}},[r("div",{staticClass:"images p-2 row"},t._l(t.project.images,function(e,a){return r("div",{key:a,staticClass:"col-6 position-relative"},[r("div",{staticClass:"position-absolute delete-img"},[r("img",{attrs:{src:s("KuaY"),alt:"удалить"},on:{click:function(s){return t.deleteImage(e.path)}}})]),t._v(" "),r("img",{staticClass:"img-thumbnail m-1",attrs:{src:t.$store.getters.API.url+"/steps/"+e.path,alt:"img"}}),t._v(" "),r("p",[t._v(t._s(e.desc))])])}),0),t._v(" "),r("div",{staticClass:"form-group row container-fluid"},[t._m(0),t._v(" "),r("label",{attrs:{for:"description"}},[t._v("Описание картинки")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",name:"description",id:"description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),t._v(" "),r("div",{staticClass:"col-12 p-1"},[r("span",{staticClass:"btn btn-sm btn-primary mt-2",on:{click:function(e){return t.uploadImage()}}},[t._v("Добавить картинку")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 p-1"},[e("input",{attrs:{type:"file",id:"img",name:"img"}})])}]};var mt,pt,vt,ft,gt=s("VU/8")(lt,dt,!1,function(t){s("n0q7")},null,null).exports,_t=s("NYxO"),ht=s("mvHQ"),Ct=s.n(ht),wt=this,bt={state:{cameras:[]},getters:{CAMERAS:function(t){return t.cameras}},mutations:{renewCameras:function(t,e){return t.cameras=e}},actions:{camerasRequest:(ft=f()(p.a.mark(function t(e){e.state;var s=e.rootState,r=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r("request_status",!0),fetch(s.api.url+"/cameras",{credentials:"include",method:"GET",headers:{Authorization:s.api.token}}).then(function(t){return 200===t.status?t.json():null}).then(function(t){return r("renewCameras",t)}).catch(function(t){return alert("Ошибка получения данных камер")}).finally(function(){return r("request_status",!1)});case 2:case"end":return t.stop()}},t,wt)})),function(t){return ft.apply(this,arguments)}),createCamera:(vt=f()(p.a.mark(function t(e,s){e.state;var r=e.rootState,a=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("request_status",!0),t.abrupt("return",fetch(r.api.url+"/camera",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:Ct()({connection_string:s.connection_string,name:s.name,owner_id:s.owner_id})}).then(function(t){return 200!==t.status?alert("Ошибка добавления"):alert("Камера добавлена")}).catch(function(t){return alert("Ошибка добавления")}).finally(function(){return a("request_status",!1)}));case 2:case"end":return t.stop()}},t,wt)})),function(t,e){return vt.apply(this,arguments)}),deleteCamera:(pt=f()(p.a.mark(function t(e,s){e.state;var r=e.rootState,a=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("request_status",!0),t.abrupt("return",fetch(r.api.url+"/camera",{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:Ct()({id:s})}).then(function(t){return 200!==t.status?alert("Ошибка удаления"):alert("Камера удалена")}).catch(function(t){return alert("Ошибка удаления")}).finally(function(){return a("request_status",!1)}));case 2:case"end":return t.stop()}},t,wt)})),function(t,e){return pt.apply(this,arguments)}),updateCamera:(mt=f()(p.a.mark(function t(e,s){e.state;var r=e.rootState,a=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("request_status",!0),t.abrupt("return",fetch(r.api.url+"/camera",{credentials:"include",method:"PUT",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:Ct()({id:s.id,connection_string:s.connection_string,name:s.name,owner_id:s.owner_id})}).then(function(t){return 200!==t.status?alert("Ошибка обновления"):alert("Камера обновлена")}).catch(function(t){return alert("Ошибка обновления")}).finally(function(){return a("request_status",!1)}));case 2:case"end":return t.stop()}},t,wt)})),function(t,e){return mt.apply(this,arguments)})}},kt=this,$t={state:{users:[]},getters:{USERS:function(t){return t.users.filter(function(t){return"admin"!==t.login})},SIMPLE_USERS:function(t){return t.users.filter(function(t){return 1!==t.is_admin})}},mutations:{renewUsers:function(t,e){t.users=e}},actions:{usersRequest:function(){var t=f()(p.a.mark(function t(e){e.state;var s=e.rootState,r=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r("request_status",!0),fetch(s.api.url+"/users",{credentials:"include",method:"GET",headers:{Authorization:s.api.token}}).then(function(t){return 200===t.status?t.json():null}).then(function(t){return r("renewUsers",t)}).catch(function(t){return alert("Ошибка получения данных пользователей")}).finally(function(){return r("request_status",!1)});case 2:case"end":return t.stop()}},t,kt)}));return function(e){return t.apply(this,arguments)}}(),createUser:function(){var t=f()(p.a.mark(function t(e,s){e.state;var r=e.rootState,a=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("request_status",!0),t.abrupt("return",fetch(r.api.url+"/user",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:Ct()({login:s.login,password:s.password,is_admin:s.is_admin,name:s.name})}).then(function(t){return 200!==t.status?alert("Ошибка добавления"):alert("Пользователь добавлен")}).catch(function(t){return alert("Ошибка добавления")}).finally(function(){return a("request_status",!1)}));case 2:case"end":return t.stop()}},t,kt)}));return function(e,s){return t.apply(this,arguments)}}(),deleteUser:function(){var t=f()(p.a.mark(function t(e,s){e.state;var r=e.rootState,a=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("request_status",!0),t.abrupt("return",fetch(r.api.url+"/user",{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:Ct()({id:s})}).then(function(t){return 200!==t.status?alert("Ошибка удаления"):alert("Пользователь удален")}).catch(function(t){return alert("Ошибка добавления")}).finally(function(){return a("request_status",!1)}));case 2:case"end":return t.stop()}},t,kt)}));return function(e,s){return t.apply(this,arguments)}}(),updateUser:function(){var t=f()(p.a.mark(function t(e,s){e.state;var r=e.rootState,a=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("request_status",!0),t.abrupt("return",fetch(r.api.url+"/user",{credentials:"include",method:"PUT",headers:{"Content-Type":"application/json",Authorization:r.api.token},body:Ct()({id:s.id,login:s.login,password:s.password,is_admin:s.is_admin,name:s.name})}).then(function(t){return 200!==t.status?alert("Ошибка изменения"):alert("Пользователь изменен")}).catch(function(t){return alert("Ошибка изменения")}).finally(function(){return a("request_status",!1)}));case 2:case"end":return t.stop()}},t,kt)}));return function(e,s){return t.apply(this,arguments)}}()}},xt=this,yt={state:{id:null,login:"",logged:!1},getters:{SELF:function(t){return t}},mutations:{login:function(t,e){t.login=e.login,t.id=e.id,t.logged=!0,localStorage.setItem("_login",e.login),localStorage.setItem("_id",e.id),It.push("/")},logout:function(t){t.id=null,t.login=null,t.logged=!1,localStorage.removeItem("_login"),localStorage.removeItem("_id"),It.push("/login")}},actions:{login:function(){var t=f()(p.a.mark(function t(e,s){e.state;var r=e.rootState,a=e.commit;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a("request_status",!0),fetch(r.api.url+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:Ct()({login:s.login,password:s.password})}).then(function(t){return 200===t.status?t.json():null}).then(function(t){null!==t?(a("login",t),a("token",t.token),a("connect",{token:r.api.token,url:r.api.url})):alert("Ошибка авторизации")}).catch(function(t){return alert("Ошибка авторизации")}).finally(function(){return a("request_status",!1)});case 2:case"end":return t.stop()}},t,xt)}));return function(e,s){return t.apply(this,arguments)}}(),logout:function(t){var e=t.commit;e("logout"),e("token_destroy")},loginUserByStorage:function(t,e){var s=t.commit,r=t.rootState;s("token",e.token),s("login",e),s("connect",{token:r.api.token,url:r.api.url})}}},qt=(function(){var t=f()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{code:404});case 1:case"end":return t.stop()}},t,xt)}))}(),{state:{url:"https://domles-nsk.ru",is_request:!1,token:null},getters:{API:function(t){return t},REQUEST:function(t){return t.is_request},TOKEN:function(t){return t.token}},mutations:{request_status:function(t,e){t.is_request=e},token:function(t,e){t.token=e,localStorage.setItem("_token",t.token)},token_destroy:function(t){localStorage.removeItem("_token"),t.token=null}},actions:{}}),At=s("DmT9"),Pt=s.n(At),Ut={state:{io:{},messages:[]},getters:{IO:function(t){return t.io},MESSAGES:function(t){return t.messages}},mutations:{connect:function(t,e){t.io=null,t.io=Pt()(e.url,{query:{token:e.token}})},getMessage:function(t,e){t.messages.push(e),setTimeout("window.scrollTo(0, document.body.offsetHeight + 100);",75)},getMessages:function(t,e){t.messages=t.messages.concat(e),t.messages=t.messages.sort(function(t,e){return t.id>e.id?1:t.id<e.id?-1:void 0})},clearMessages:function(t){t.messages=[]}},actions:{connect:function(t){var e=t.commit,s=t.rootState;e("connect",{token:s.api.token,url:s.api.url})},sendMessage:function(t,e){t.commit;t.rootState.socket.io.emit("message",e)},getMessage:function(t,e){(0,t.commit)("getMessage",e)},getMessages:function(t,e){var s=t.commit;console.log(e.data),s("getMessages",e.data)},clearMessages:function(t){(0,t.commit)("clearMessages")}}};r.a.use(_t.a);var jt=new _t.a.Store({state:{},getters:{},mutations:{},actions:{},modules:{cameras:bt,users:$t,self:yt,api:qt,socket:Ut}});r.a.use(u.a);var It=new u.a({routes:[{path:"/",name:"home",component:j},{path:"/projects",name:"projects",component:ut},{path:"/project/:id",name:"project",component:gt},{path:"/works",name:"works",component:K},{path:"/news",name:"news",component:rt},{path:"/bonuses",name:"bonuses",component:ot},{path:"/work/:id",name:"work",component:tt},{path:"/coasts",name:"coasts",component:V},{path:"/questions",name:"questions",component:O},{path:"/benefit",name:"benefit",component:J},{path:"/login",name:"login",component:d},{path:"/cameras",name:"cameras",component:y},{path:"/users",name:"users",component:P},{path:"/chats",name:"chats",component:S},{path:"/chat/:id",name:"chat",component:Q}]});s("qb6w");r.a.config.productionTip=!1;new r.a({el:"#app",router:It,store:jt,components:{App:c},template:"<App/>"})},SZVQ:function(t,e){},VTLO:function(t,e){},bj6J:function(t,e){},feQQ:function(t,e){},gt74:function(t,e){},n0q7:function(t,e){},qb6w:function(t,e){},qzF9:function(t,e){},r9AI:function(t,e){},weyE:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.03a85a3145c22aae0ac2.js.map